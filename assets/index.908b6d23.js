(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ho(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function qo(t){if(B(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=we(s)?pd(s):qo(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(we(t))return t;if(le(t))return t}}const hd=/;(?![^(]*\))/g,fd=/:([^]+)/,dd=/\/\*.*?\*\//gs;function pd(t){const e={};return t.replace(dd,"").split(hd).forEach(n=>{if(n){const s=n.split(fd);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ko(t){let e="";if(we(t))e=t;else if(B(t))for(let n=0;n<t.length;n++){const s=Ko(t[n]);s&&(e+=s+" ")}else if(le(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",md=Ho(gd);function Ul(t){return!!t||t===""}const xi=t=>we(t)?t:t==null?"":B(t)||le(t)&&(t.toString===Hl||!H(t.toString))?JSON.stringify(t,Bl,2):String(t),Bl=(t,e)=>e&&e.__v_isRef?Bl(t,e.value):bn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:$l(e)?{[`Set(${e.size})`]:[...e.values()]}:le(e)&&!B(e)&&!ql(e)?String(e):e,oe={},En=[],st=()=>{},yd=()=>!1,vd=/^on[^a-z]/,jr=t=>vd.test(t),zo=t=>t.startsWith("onUpdate:"),Pe=Object.assign,Wo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},wd=Object.prototype.hasOwnProperty,Q=(t,e)=>wd.call(t,e),B=Array.isArray,bn=t=>Hr(t)==="[object Map]",$l=t=>Hr(t)==="[object Set]",H=t=>typeof t=="function",we=t=>typeof t=="string",Go=t=>typeof t=="symbol",le=t=>t!==null&&typeof t=="object",jl=t=>le(t)&&H(t.then)&&H(t.catch),Hl=Object.prototype.toString,Hr=t=>Hl.call(t),Ed=t=>Hr(t).slice(8,-1),ql=t=>Hr(t)==="[object Object]",Qo=t=>we(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ur=Ho(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qr=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},bd=/-(\w)/g,xn=qr(t=>t.replace(bd,(e,n)=>n?n.toUpperCase():"")),Td=/\B([A-Z])/g,$n=qr(t=>t.replace(Td,"-$1").toLowerCase()),Kl=qr(t=>t.charAt(0).toUpperCase()+t.slice(1)),Li=qr(t=>t?`on${Kl(t)}`:""),ps=(t,e)=>!Object.is(t,e),hr=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},wr=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Er=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let uc;const _d=()=>uc||(uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ct;class Cd{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=ct,!e&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}run(e){if(this.active){const n=ct;try{return ct=this,e()}finally{ct=n}}}on(){ct=this}off(){ct=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function Id(t,e=ct){e&&e.active&&e.effects.push(t)}const Yo=t=>{const e=new Set(t);return e.w=0,e.n=0,e},zl=t=>(t.w&Pt)>0,Wl=t=>(t.n&Pt)>0,Sd=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Pt},Ad=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];zl(r)&&!Wl(r)?r.delete(t):e[n++]=r,r.w&=~Pt,r.n&=~Pt}e.length=n}},eo=new WeakMap;let ts=0,Pt=1;const to=30;let tt;const nn=Symbol(""),no=Symbol("");class Xo{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Id(this,s)}run(){if(!this.active)return this.fn();let e=tt,n=Lt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=tt,tt=this,Lt=!0,Pt=1<<++ts,ts<=to?Sd(this):hc(this),this.fn()}finally{ts<=to&&Ad(this),Pt=1<<--ts,tt=this.parent,Lt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){tt===this?this.deferStop=!0:this.active&&(hc(this),this.onStop&&this.onStop(),this.active=!1)}}function hc(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Lt=!0;const Gl=[];function jn(){Gl.push(Lt),Lt=!1}function Hn(){const t=Gl.pop();Lt=t===void 0?!0:t}function We(t,e,n){if(Lt&&tt){let s=eo.get(t);s||eo.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Yo()),Ql(r)}}function Ql(t,e){let n=!1;ts<=to?Wl(t)||(t.n|=Pt,n=!zl(t)):n=!t.has(tt),n&&(t.add(tt),tt.deps.push(t))}function bt(t,e,n,s,r,i){const o=eo.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&B(t)){const c=Er(s);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":B(t)?Qo(n)&&a.push(o.get("length")):(a.push(o.get(nn)),bn(t)&&a.push(o.get(no)));break;case"delete":B(t)||(a.push(o.get(nn)),bn(t)&&a.push(o.get(no)));break;case"set":bn(t)&&a.push(o.get(nn));break}if(a.length===1)a[0]&&so(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);so(Yo(c))}}function so(t,e){const n=B(t)?t:[...t];for(const s of n)s.computed&&fc(s);for(const s of n)s.computed||fc(s)}function fc(t,e){(t!==tt||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Dd=Ho("__proto__,__v_isRef,__isVue"),Yl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Go)),xd=Jo(),Ld=Jo(!1,!0),Nd=Jo(!0),dc=kd();function kd(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Y(this);for(let i=0,o=this.length;i<o;i++)We(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(Y)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){jn();const s=Y(this)[e].apply(this,n);return Hn(),s}}),t}function Jo(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?Gd:tu:e?eu:Zl).get(s))return s;const o=B(s);if(!t&&o&&Q(dc,r))return Reflect.get(dc,r,i);const a=Reflect.get(s,r,i);return(Go(r)?Yl.has(r):Dd(r))||(t||We(s,"get",r),e)?a:ke(a)?o&&Qo(r)?a:a.value:le(a)?t?nu(a):ta(a):a}}const Md=Xl(),Rd=Xl(!0);function Xl(t=!1){return function(n,s,r,i){let o=n[s];if(Ln(o)&&ke(o)&&!ke(r))return!1;if(!t&&(!br(r)&&!Ln(r)&&(o=Y(o),r=Y(r)),!B(n)&&ke(o)&&!ke(r)))return o.value=r,!0;const a=B(n)&&Qo(s)?Number(s)<n.length:Q(n,s),c=Reflect.set(n,s,r,i);return n===Y(i)&&(a?ps(r,o)&&bt(n,"set",s,r):bt(n,"add",s,r)),c}}function Od(t,e){const n=Q(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&bt(t,"delete",e,void 0),s}function Pd(t,e){const n=Reflect.has(t,e);return(!Go(e)||!Yl.has(e))&&We(t,"has",e),n}function Fd(t){return We(t,"iterate",B(t)?"length":nn),Reflect.ownKeys(t)}const Jl={get:xd,set:Md,deleteProperty:Od,has:Pd,ownKeys:Fd},Vd={get:Nd,set(t,e){return!0},deleteProperty(t,e){return!0}},Ud=Pe({},Jl,{get:Ld,set:Rd}),Zo=t=>t,Kr=t=>Reflect.getPrototypeOf(t);function Js(t,e,n=!1,s=!1){t=t.__v_raw;const r=Y(t),i=Y(e);n||(e!==i&&We(r,"get",e),We(r,"get",i));const{has:o}=Kr(r),a=s?Zo:n?sa:gs;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function Zs(t,e=!1){const n=this.__v_raw,s=Y(n),r=Y(t);return e||(t!==r&&We(s,"has",t),We(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function er(t,e=!1){return t=t.__v_raw,!e&&We(Y(t),"iterate",nn),Reflect.get(t,"size",t)}function pc(t){t=Y(t);const e=Y(this);return Kr(e).has.call(e,t)||(e.add(t),bt(e,"add",t,t)),this}function gc(t,e){e=Y(e);const n=Y(this),{has:s,get:r}=Kr(n);let i=s.call(n,t);i||(t=Y(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?ps(e,o)&&bt(n,"set",t,e):bt(n,"add",t,e),this}function mc(t){const e=Y(this),{has:n,get:s}=Kr(e);let r=n.call(e,t);r||(t=Y(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&bt(e,"delete",t,void 0),i}function yc(){const t=Y(this),e=t.size!==0,n=t.clear();return e&&bt(t,"clear",void 0,void 0),n}function tr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=Y(o),c=e?Zo:t?sa:gs;return!t&&We(a,"iterate",nn),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function nr(t,e,n){return function(...s){const r=this.__v_raw,i=Y(r),o=bn(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),u=n?Zo:e?sa:gs;return!e&&We(i,"iterate",c?no:nn),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Dt(t){return function(...e){return t==="delete"?!1:this}}function Bd(){const t={get(i){return Js(this,i)},get size(){return er(this)},has:Zs,add:pc,set:gc,delete:mc,clear:yc,forEach:tr(!1,!1)},e={get(i){return Js(this,i,!1,!0)},get size(){return er(this)},has:Zs,add:pc,set:gc,delete:mc,clear:yc,forEach:tr(!1,!0)},n={get(i){return Js(this,i,!0)},get size(){return er(this,!0)},has(i){return Zs.call(this,i,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:tr(!0,!1)},s={get(i){return Js(this,i,!0,!0)},get size(){return er(this,!0)},has(i){return Zs.call(this,i,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:tr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=nr(i,!1,!1),n[i]=nr(i,!0,!1),e[i]=nr(i,!1,!0),s[i]=nr(i,!0,!0)}),[t,n,e,s]}const[$d,jd,Hd,qd]=Bd();function ea(t,e){const n=e?t?qd:Hd:t?jd:$d;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Q(n,r)&&r in s?n:s,r,i)}const Kd={get:ea(!1,!1)},zd={get:ea(!1,!0)},Wd={get:ea(!0,!1)},Zl=new WeakMap,eu=new WeakMap,tu=new WeakMap,Gd=new WeakMap;function Qd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yd(t){return t.__v_skip||!Object.isExtensible(t)?0:Qd(Ed(t))}function ta(t){return Ln(t)?t:na(t,!1,Jl,Kd,Zl)}function Xd(t){return na(t,!1,Ud,zd,eu)}function nu(t){return na(t,!0,Vd,Wd,tu)}function na(t,e,n,s,r){if(!le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=Yd(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function Tn(t){return Ln(t)?Tn(t.__v_raw):!!(t&&t.__v_isReactive)}function Ln(t){return!!(t&&t.__v_isReadonly)}function br(t){return!!(t&&t.__v_isShallow)}function su(t){return Tn(t)||Ln(t)}function Y(t){const e=t&&t.__v_raw;return e?Y(e):t}function ru(t){return wr(t,"__v_skip",!0),t}const gs=t=>le(t)?ta(t):t,sa=t=>le(t)?nu(t):t;function iu(t){Lt&&tt&&(t=Y(t),Ql(t.dep||(t.dep=Yo())))}function ou(t,e){t=Y(t),t.dep&&so(t.dep)}function ke(t){return!!(t&&t.__v_isRef===!0)}function _n(t){return Jd(t,!1)}function Jd(t,e){return ke(t)?t:new Zd(t,e)}class Zd{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Y(e),this._value=n?e:gs(e)}get value(){return iu(this),this._value}set value(e){const n=this.__v_isShallow||br(e)||Ln(e);e=n?e:Y(e),ps(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:gs(e),ou(this))}}function au(t){return ke(t)?t.value:t}const ep={get:(t,e,n)=>au(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return ke(r)&&!ke(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function cu(t){return Tn(t)?t:new Proxy(t,ep)}var lu;class tp{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[lu]=!1,this._dirty=!0,this.effect=new Xo(e,()=>{this._dirty||(this._dirty=!0,ou(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=Y(this);return iu(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}lu="__v_isReadonly";function np(t,e,n=!1){let s,r;const i=H(t);return i?(s=t,r=st):(s=t.get,r=t.set),new tp(s,r,i||!r,n)}function Nt(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){zr(i,e,n)}return r}function Xe(t,e,n,s){if(H(t)){const i=Nt(t,e,n,s);return i&&jl(i)&&i.catch(o=>{zr(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(Xe(t[i],e,n,s));return r}function zr(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Nt(c,null,10,[t,o,a]);return}}sp(t,n,r,s)}function sp(t,e,n,s=!0){console.error(t)}let ms=!1,ro=!1;const Le=[];let ut=0;const Cn=[];let vt=null,Qt=0;const uu=Promise.resolve();let ra=null;function rp(t){const e=ra||uu;return t?e.then(this?t.bind(this):t):e}function ip(t){let e=ut+1,n=Le.length;for(;e<n;){const s=e+n>>>1;ys(Le[s])<t?e=s+1:n=s}return e}function ia(t){(!Le.length||!Le.includes(t,ms&&t.allowRecurse?ut+1:ut))&&(t.id==null?Le.push(t):Le.splice(ip(t.id),0,t),hu())}function hu(){!ms&&!ro&&(ro=!0,ra=uu.then(du))}function op(t){const e=Le.indexOf(t);e>ut&&Le.splice(e,1)}function ap(t){B(t)?Cn.push(...t):(!vt||!vt.includes(t,t.allowRecurse?Qt+1:Qt))&&Cn.push(t),hu()}function vc(t,e=ms?ut+1:0){for(;e<Le.length;e++){const n=Le[e];n&&n.pre&&(Le.splice(e,1),e--,n())}}function fu(t){if(Cn.length){const e=[...new Set(Cn)];if(Cn.length=0,vt){vt.push(...e);return}for(vt=e,vt.sort((n,s)=>ys(n)-ys(s)),Qt=0;Qt<vt.length;Qt++)vt[Qt]();vt=null,Qt=0}}const ys=t=>t.id==null?1/0:t.id,cp=(t,e)=>{const n=ys(t)-ys(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function du(t){ro=!1,ms=!0,Le.sort(cp);const e=st;try{for(ut=0;ut<Le.length;ut++){const n=Le[ut];n&&n.active!==!1&&Nt(n,null,14)}}finally{ut=0,Le.length=0,fu(),ms=!1,ra=null,(Le.length||Cn.length)&&du()}}function lp(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||oe;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=s[u]||oe;p&&(r=n.map(m=>we(m)?m.trim():m)),f&&(r=n.map(Er))}let a,c=s[a=Li(e)]||s[a=Li(xn(e))];!c&&i&&(c=s[a=Li($n(e))]),c&&Xe(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Xe(l,t,6,r)}}function pu(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!H(t)){const c=l=>{const u=pu(l,e,!0);u&&(a=!0,Pe(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(le(t)&&s.set(t,null),null):(B(i)?i.forEach(c=>o[c]=null):Pe(o,i),le(t)&&s.set(t,o),o)}function Wr(t,e){return!t||!jr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Q(t,e[0].toLowerCase()+e.slice(1))||Q(t,$n(e))||Q(t,e))}let Me=null,Gr=null;function Tr(t){const e=Me;return Me=t,Gr=t&&t.type.__scopeId||null,e}function oa(t){Gr=t}function aa(){Gr=null}function io(t,e=Me,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ac(-1);const i=Tr(e);let o;try{o=t(...r)}finally{Tr(i),s._d&&Ac(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ni(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:f,data:p,setupState:m,ctx:S,inheritAttrs:T}=t;let M,j;const Z=Tr(t);try{if(n.shapeFlag&4){const ee=r||s;M=lt(u.call(ee,ee,f,i,m,p,S)),j=c}else{const ee=e;M=lt(ee.length>1?ee(i,{attrs:c,slots:a,emit:l}):ee(i,null)),j=e.props?c:up(c)}}catch(ee){cs.length=0,zr(ee,t,1),M=ze(ft)}let F=M;if(j&&T!==!1){const ee=Object.keys(j),{shapeFlag:de}=F;ee.length&&de&7&&(o&&ee.some(zo)&&(j=hp(j,o)),F=Ft(F,j))}return n.dirs&&(F=Ft(F),F.dirs=F.dirs?F.dirs.concat(n.dirs):n.dirs),n.transition&&(F.transition=n.transition),M=F,Tr(Z),M}const up=t=>{let e;for(const n in t)(n==="class"||n==="style"||jr(n))&&((e||(e={}))[n]=t[n]);return e},hp=(t,e)=>{const n={};for(const s in t)(!zo(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function fp(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?wc(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!Wr(l,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?wc(s,o,l):!0:!!o;return!1}function wc(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Wr(n,i))return!0}return!1}function dp({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const pp=t=>t.__isSuspense;function gp(t,e){e&&e.pendingBranch?B(t)?e.effects.push(...t):e.effects.push(t):ap(t)}function mp(t,e){if(Se){let n=Se.provides;const s=Se.parent&&Se.parent.provides;s===n&&(n=Se.provides=Object.create(s)),n[t]=e}}function fr(t,e,n=!1){const s=Se||Me;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&H(e)?e.call(s.proxy):e}}const sr={};function ki(t,e,n){return gu(t,e,n)}function gu(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=oe){const a=Se;let c,l=!1,u=!1;if(ke(t)?(c=()=>t.value,l=br(t)):Tn(t)?(c=()=>t,s=!0):B(t)?(u=!0,l=t.some(F=>Tn(F)||br(F)),c=()=>t.map(F=>{if(ke(F))return F.value;if(Tn(F))return Jt(F);if(H(F))return Nt(F,a,2)})):H(t)?e?c=()=>Nt(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return f&&f(),Xe(t,a,3,[p])}:c=st,e&&s){const F=c;c=()=>Jt(F())}let f,p=F=>{f=j.onStop=()=>{Nt(F,a,4)}},m;if(ws)if(p=st,e?n&&Xe(e,a,3,[c(),u?[]:void 0,p]):c(),r==="sync"){const F=fg();m=F.__watcherHandles||(F.__watcherHandles=[])}else return st;let S=u?new Array(t.length).fill(sr):sr;const T=()=>{if(!!j.active)if(e){const F=j.run();(s||l||(u?F.some((ee,de)=>ps(ee,S[de])):ps(F,S)))&&(f&&f(),Xe(e,a,3,[F,S===sr?void 0:u&&S[0]===sr?[]:S,p]),S=F)}else j.run()};T.allowRecurse=!!e;let M;r==="sync"?M=T:r==="post"?M=()=>$e(T,a&&a.suspense):(T.pre=!0,a&&(T.id=a.uid),M=()=>ia(T));const j=new Xo(c,M);e?n?T():S=j.run():r==="post"?$e(j.run.bind(j),a&&a.suspense):j.run();const Z=()=>{j.stop(),a&&a.scope&&Wo(a.scope.effects,j)};return m&&m.push(Z),Z}function yp(t,e,n){const s=this.proxy,r=we(t)?t.includes(".")?mu(s,t):()=>s[t]:t.bind(s,s);let i;H(e)?i=e:(i=e.handler,n=e);const o=Se;kn(this);const a=gu(r,i.bind(s),n);return o?kn(o):sn(),a}function mu(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function Jt(t,e){if(!le(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ke(t))Jt(t.value,e);else if(B(t))for(let n=0;n<t.length;n++)Jt(t[n],e);else if($l(t)||bn(t))t.forEach(n=>{Jt(n,e)});else if(ql(t))for(const n in t)Jt(t[n],e);return t}function vp(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Eu(()=>{t.isMounted=!0}),bu(()=>{t.isUnmounting=!0}),t}const Qe=[Function,Array],wp={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qe,onEnter:Qe,onAfterEnter:Qe,onEnterCancelled:Qe,onBeforeLeave:Qe,onLeave:Qe,onAfterLeave:Qe,onLeaveCancelled:Qe,onBeforeAppear:Qe,onAppear:Qe,onAfterAppear:Qe,onAppearCancelled:Qe},setup(t,{slots:e}){const n=ig(),s=vp();let r;return()=>{const i=e.default&&vu(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const T of i)if(T.type!==ft){o=T;break}}const a=Y(t),{mode:c}=a;if(s.isLeaving)return Mi(o);const l=Ec(o);if(!l)return Mi(o);const u=oo(l,a,s,n);ao(l,u);const f=n.subTree,p=f&&Ec(f);let m=!1;const{getTransitionKey:S}=l.type;if(S){const T=S();r===void 0?r=T:T!==r&&(r=T,m=!0)}if(p&&p.type!==ft&&(!Yt(l,p)||m)){const T=oo(p,a,s,n);if(ao(p,T),c==="out-in")return s.isLeaving=!0,T.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&n.update()},Mi(o);c==="in-out"&&l.type!==ft&&(T.delayLeave=(M,j,Z)=>{const F=yu(s,p);F[String(p.key)]=p,M._leaveCb=()=>{j(),M._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=Z})}return o}}},Ep=wp;function yu(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function oo(t,e,n,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:S,onBeforeAppear:T,onAppear:M,onAfterAppear:j,onAppearCancelled:Z}=e,F=String(t.key),ee=yu(n,t),de=(K,be)=>{K&&Xe(K,s,9,be)},At=(K,be)=>{const ue=be[1];de(K,be),B(K)?K.every(He=>He.length<=1)&&ue():K.length<=1&&ue()},Ze={mode:i,persisted:o,beforeEnter(K){let be=a;if(!n.isMounted)if(r)be=T||a;else return;K._leaveCb&&K._leaveCb(!0);const ue=ee[F];ue&&Yt(t,ue)&&ue.el._leaveCb&&ue.el._leaveCb(),de(be,[K])},enter(K){let be=c,ue=l,He=u;if(!n.isMounted)if(r)be=M||c,ue=j||l,He=Z||u;else return;let rt=!1;const mt=K._enterCb=Xn=>{rt||(rt=!0,Xn?de(He,[K]):de(ue,[K]),Ze.delayedLeave&&Ze.delayedLeave(),K._enterCb=void 0)};be?At(be,[K,mt]):mt()},leave(K,be){const ue=String(t.key);if(K._enterCb&&K._enterCb(!0),n.isUnmounting)return be();de(f,[K]);let He=!1;const rt=K._leaveCb=mt=>{He||(He=!0,be(),mt?de(S,[K]):de(m,[K]),K._leaveCb=void 0,ee[ue]===t&&delete ee[ue])};ee[ue]=t,p?At(p,[K,rt]):rt()},clone(K){return oo(K,e,n,s)}};return Ze}function Mi(t){if(Qr(t))return t=Ft(t),t.children=null,t}function Ec(t){return Qr(t)?t.children?t.children[0]:void 0:t}function ao(t,e){t.shapeFlag&6&&t.component?ao(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vu(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ke?(o.patchFlag&128&&r++,s=s.concat(vu(o.children,e,a))):(e||o.type!==ft)&&s.push(a!=null?Ft(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}const os=t=>!!t.type.__asyncLoader,Qr=t=>t.type.__isKeepAlive;function bp(t,e){wu(t,"a",e)}function Tp(t,e){wu(t,"da",e)}function wu(t,e,n=Se){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Yr(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Qr(r.parent.vnode)&&_p(s,e,n,r),r=r.parent}}function _p(t,e,n,s){const r=Yr(e,t,s,!0);Tu(()=>{Wo(s[e],r)},n)}function Yr(t,e,n=Se,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;jn(),kn(n);const a=Xe(e,n,t,o);return sn(),Hn(),a});return s?r.unshift(i):r.push(i),i}}const St=t=>(e,n=Se)=>(!ws||t==="sp")&&Yr(t,(...s)=>e(...s),n),Cp=St("bm"),Eu=St("m"),Ip=St("bu"),Sp=St("u"),bu=St("bum"),Tu=St("um"),Ap=St("sp"),Dp=St("rtg"),xp=St("rtc");function Lp(t,e=Se){Yr("ec",t,e)}function dr(t,e){const n=Me;if(n===null)return t;const s=Zr(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=oe]=e[i];o&&(H(o)&&(o={mounted:o,updated:o}),o.deep&&Jt(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function Kt(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(jn(),Xe(c,n,8,[t.el,a,t,e]),Hn())}}const Np=Symbol();function kp(t,e,n,s){let r;const i=n&&n[s];if(B(t)||we(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(le(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(t[l],l,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}function Mp(t,e,n={},s,r){if(Me.isCE||Me.parent&&os(Me.parent)&&Me.parent.isCE)return e!=="default"&&(n.name=e),ze("slot",n,s&&s());let i=t[e];i&&i._c&&(i._d=!1),kt();const o=i&&_u(i(n)),a=Mu(Ke,{key:n.key||o&&o.key||`_${e}`},o||(s?s():[]),o&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function _u(t){return t.some(e=>Ru(e)?!(e.type===ft||e.type===Ke&&!_u(e.children)):!0)?t:null}const co=t=>t?Pu(t)?Zr(t)||t.proxy:co(t.parent):null,as=Pe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>co(t.parent),$root:t=>co(t.root),$emit:t=>t.emit,$options:t=>ca(t),$forceUpdate:t=>t.f||(t.f=()=>ia(t.update)),$nextTick:t=>t.n||(t.n=rp.bind(t.proxy)),$watch:t=>yp.bind(t)}),Ri=(t,e)=>t!==oe&&!t.__isScriptSetup&&Q(t,e),Rp={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Ri(s,e))return o[e]=1,s[e];if(r!==oe&&Q(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&Q(l,e))return o[e]=3,i[e];if(n!==oe&&Q(n,e))return o[e]=4,n[e];lo&&(o[e]=0)}}const u=as[e];let f,p;if(u)return e==="$attrs"&&We(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==oe&&Q(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Q(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Ri(r,e)?(r[e]=n,!0):s!==oe&&Q(s,e)?(s[e]=n,!0):Q(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==oe&&Q(t,o)||Ri(e,o)||(a=i[0])&&Q(a,o)||Q(s,o)||Q(as,o)||Q(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Q(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let lo=!0;function Op(t){const e=ca(t),n=t.proxy,s=t.ctx;lo=!1,e.beforeCreate&&bc(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:p,beforeUpdate:m,updated:S,activated:T,deactivated:M,beforeDestroy:j,beforeUnmount:Z,destroyed:F,unmounted:ee,render:de,renderTracked:At,renderTriggered:Ze,errorCaptured:K,serverPrefetch:be,expose:ue,inheritAttrs:He,components:rt,directives:mt,filters:Xn}=e;if(l&&Pp(l,s,null,t.appContext.config.unwrapInjectedRef),o)for(const he in o){const se=o[he];H(se)&&(s[he]=se.bind(n))}if(r){const he=r.call(n,n);le(he)&&(t.data=ta(he))}if(lo=!0,i)for(const he in i){const se=i[he],Ht=H(se)?se.bind(n,n):H(se.get)?se.get.bind(n,n):st,Ys=!H(se)&&H(se.set)?se.set.bind(n):st,qt=Vu({get:Ht,set:Ys});Object.defineProperty(s,he,{enumerable:!0,configurable:!0,get:()=>qt.value,set:it=>qt.value=it})}if(a)for(const he in a)Cu(a[he],s,n,he);if(c){const he=H(c)?c.call(n):c;Reflect.ownKeys(he).forEach(se=>{mp(se,he[se])})}u&&bc(u,t,"c");function Ve(he,se){B(se)?se.forEach(Ht=>he(Ht.bind(n))):se&&he(se.bind(n))}if(Ve(Cp,f),Ve(Eu,p),Ve(Ip,m),Ve(Sp,S),Ve(bp,T),Ve(Tp,M),Ve(Lp,K),Ve(xp,At),Ve(Dp,Ze),Ve(bu,Z),Ve(Tu,ee),Ve(Ap,be),B(ue))if(ue.length){const he=t.exposed||(t.exposed={});ue.forEach(se=>{Object.defineProperty(he,se,{get:()=>n[se],set:Ht=>n[se]=Ht})})}else t.exposed||(t.exposed={});de&&t.render===st&&(t.render=de),He!=null&&(t.inheritAttrs=He),rt&&(t.components=rt),mt&&(t.directives=mt)}function Pp(t,e,n=st,s=!1){B(t)&&(t=uo(t));for(const r in t){const i=t[r];let o;le(i)?"default"in i?o=fr(i.from||r,i.default,!0):o=fr(i.from||r):o=fr(i),ke(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function bc(t,e,n){Xe(B(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Cu(t,e,n,s){const r=s.includes(".")?mu(n,s):()=>n[s];if(we(t)){const i=e[t];H(i)&&ki(r,i)}else if(H(t))ki(r,t.bind(n));else if(le(t))if(B(t))t.forEach(i=>Cu(i,e,n,s));else{const i=H(t.handler)?t.handler.bind(n):e[t.handler];H(i)&&ki(r,i,t)}}function ca(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>_r(c,l,o,!0)),_r(c,e,o)),le(e)&&i.set(e,c),c}function _r(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&_r(t,i,n,!0),r&&r.forEach(o=>_r(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Fp[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Fp={data:Tc,props:Wt,emits:Wt,methods:Wt,computed:Wt,beforeCreate:Ue,created:Ue,beforeMount:Ue,mounted:Ue,beforeUpdate:Ue,updated:Ue,beforeDestroy:Ue,beforeUnmount:Ue,destroyed:Ue,unmounted:Ue,activated:Ue,deactivated:Ue,errorCaptured:Ue,serverPrefetch:Ue,components:Wt,directives:Wt,watch:Up,provide:Tc,inject:Vp};function Tc(t,e){return e?t?function(){return Pe(H(t)?t.call(this,this):t,H(e)?e.call(this,this):e)}:e:t}function Vp(t,e){return Wt(uo(t),uo(e))}function uo(t){if(B(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ue(t,e){return t?[...new Set([].concat(t,e))]:e}function Wt(t,e){return t?Pe(Pe(Object.create(null),t),e):e}function Up(t,e){if(!t)return e;if(!e)return t;const n=Pe(Object.create(null),t);for(const s in e)n[s]=Ue(t[s],e[s]);return n}function Bp(t,e,n,s=!1){const r={},i={};wr(i,Jr,1),t.propsDefaults=Object.create(null),Iu(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Xd(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function $p(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Y(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Wr(t.emitsOptions,p))continue;const m=e[p];if(c)if(Q(i,p))m!==i[p]&&(i[p]=m,l=!0);else{const S=xn(p);r[S]=ho(c,a,S,m,t,!1)}else m!==i[p]&&(i[p]=m,l=!0)}}}else{Iu(t,e,r,i)&&(l=!0);let u;for(const f in a)(!e||!Q(e,f)&&((u=$n(f))===f||!Q(e,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=ho(c,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!Q(e,f)&&!0)&&(delete i[f],l=!0)}l&&bt(t,"set","$attrs")}function Iu(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(ur(c))continue;const l=e[c];let u;r&&Q(r,u=xn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Wr(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Y(n),l=a||oe;for(let u=0;u<i.length;u++){const f=i[u];n[f]=ho(r,c,f,l[f],t,!Q(l,f))}}return o}function ho(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Q(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&H(c)){const{propsDefaults:l}=r;n in l?s=l[n]:(kn(r),s=l[n]=c.call(null,e),sn())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===$n(n))&&(s=!0))}return s}function Su(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!H(t)){const u=f=>{c=!0;const[p,m]=Su(f,e,!0);Pe(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return le(t)&&s.set(t,En),En;if(B(i))for(let u=0;u<i.length;u++){const f=xn(i[u]);_c(f)&&(o[f]=oe)}else if(i)for(const u in i){const f=xn(u);if(_c(f)){const p=i[u],m=o[f]=B(p)||H(p)?{type:p}:Object.assign({},p);if(m){const S=Sc(Boolean,m.type),T=Sc(String,m.type);m[0]=S>-1,m[1]=T<0||S<T,(S>-1||Q(m,"default"))&&a.push(f)}}}const l=[o,a];return le(t)&&s.set(t,l),l}function _c(t){return t[0]!=="$"}function Cc(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Ic(t,e){return Cc(t)===Cc(e)}function Sc(t,e){return B(e)?e.findIndex(n=>Ic(n,t)):H(e)&&Ic(e,t)?0:-1}const Au=t=>t[0]==="_"||t==="$stable",la=t=>B(t)?t.map(lt):[lt(t)],jp=(t,e,n)=>{if(e._n)return e;const s=io((...r)=>la(e(...r)),n);return s._c=!1,s},Du=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Au(r))continue;const i=t[r];if(H(i))e[r]=jp(r,i,s);else if(i!=null){const o=la(i);e[r]=()=>o}}},xu=(t,e)=>{const n=la(e);t.slots.default=()=>n},Hp=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Y(e),wr(e,"_",n)):Du(e,t.slots={})}else t.slots={},e&&xu(t,e);wr(t.slots,Jr,1)},qp=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=oe;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Pe(r,e),!n&&a===1&&delete r._):(i=!e.$stable,Du(e,r)),o=e}else e&&(xu(t,e),o={default:1});if(i)for(const a in r)!Au(a)&&!(a in o)&&delete r[a]};function Lu(){return{app:null,config:{isNativeTag:yd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Kp=0;function zp(t,e){return function(s,r=null){H(s)||(s=Object.assign({},s)),r!=null&&!le(r)&&(r=null);const i=Lu(),o=new Set;let a=!1;const c=i.app={_uid:Kp++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:dg,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&H(l.install)?(o.add(l),l.install(c,...u)):H(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,f){if(!a){const p=ze(s,r);return p.appContext=i,u&&e?e(p,l):t(p,l,f),a=!0,c._container=l,l.__vue_app__=c,Zr(p.component)||p.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function fo(t,e,n,s,r=!1){if(B(t)){t.forEach((p,m)=>fo(p,e&&(B(e)?e[m]:e),n,s,r));return}if(os(s)&&!r)return;const i=s.shapeFlag&4?Zr(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===oe?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==c&&(we(l)?(u[l]=null,Q(f,l)&&(f[l]=null)):ke(l)&&(l.value=null)),H(c))Nt(c,a,12,[o,u]);else{const p=we(c),m=ke(c);if(p||m){const S=()=>{if(t.f){const T=p?Q(f,c)?f[c]:u[c]:c.value;r?B(T)&&Wo(T,i):B(T)?T.includes(i)||T.push(i):p?(u[c]=[i],Q(f,c)&&(f[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else p?(u[c]=o,Q(f,c)&&(f[c]=o)):m&&(c.value=o,t.k&&(u[t.k]=o))};o?(S.id=-1,$e(S,n)):S()}}}const $e=gp;function Wp(t){return Gp(t)}function Gp(t,e){const n=_d();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:p,setScopeId:m=st,insertStaticContent:S}=t,T=(h,d,g,v=null,y=null,C=null,A=!1,_=null,I=!!d.dynamicChildren)=>{if(h===d)return;h&&!Yt(h,d)&&(v=Xs(h),it(h,y,C,!0),h=null),d.patchFlag===-2&&(I=!1,d.dynamicChildren=null);const{type:w,ref:N,shapeFlag:D}=d;switch(w){case Xr:M(h,d,g,v);break;case ft:j(h,d,g,v);break;case Oi:h==null&&Z(d,g,v,A);break;case Ke:rt(h,d,g,v,y,C,A,_,I);break;default:D&1?de(h,d,g,v,y,C,A,_,I):D&6?mt(h,d,g,v,y,C,A,_,I):(D&64||D&128)&&w.process(h,d,g,v,y,C,A,_,I,pn)}N!=null&&y&&fo(N,h&&h.ref,C,d||h,!d)},M=(h,d,g,v)=>{if(h==null)s(d.el=a(d.children),g,v);else{const y=d.el=h.el;d.children!==h.children&&l(y,d.children)}},j=(h,d,g,v)=>{h==null?s(d.el=c(d.children||""),g,v):d.el=h.el},Z=(h,d,g,v)=>{[h.el,h.anchor]=S(h.children,d,g,v,h.el,h.anchor)},F=({el:h,anchor:d},g,v)=>{let y;for(;h&&h!==d;)y=p(h),s(h,g,v),h=y;s(d,g,v)},ee=({el:h,anchor:d})=>{let g;for(;h&&h!==d;)g=p(h),r(h),h=g;r(d)},de=(h,d,g,v,y,C,A,_,I)=>{A=A||d.type==="svg",h==null?At(d,g,v,y,C,A,_,I):be(h,d,y,C,A,_,I)},At=(h,d,g,v,y,C,A,_)=>{let I,w;const{type:N,props:D,shapeFlag:k,transition:V,dirs:z}=h;if(I=h.el=o(h.type,C,D&&D.is,D),k&8?u(I,h.children):k&16&&K(h.children,I,null,v,y,C&&N!=="foreignObject",A,_),z&&Kt(h,null,v,"created"),D){for(const te in D)te!=="value"&&!ur(te)&&i(I,te,null,D[te],C,h.children,v,y,yt);"value"in D&&i(I,"value",null,D.value),(w=D.onVnodeBeforeMount)&&at(w,v,h)}Ze(I,h,h.scopeId,A,v),z&&Kt(h,null,v,"beforeMount");const re=(!y||y&&!y.pendingBranch)&&V&&!V.persisted;re&&V.beforeEnter(I),s(I,d,g),((w=D&&D.onVnodeMounted)||re||z)&&$e(()=>{w&&at(w,v,h),re&&V.enter(I),z&&Kt(h,null,v,"mounted")},y)},Ze=(h,d,g,v,y)=>{if(g&&m(h,g),v)for(let C=0;C<v.length;C++)m(h,v[C]);if(y){let C=y.subTree;if(d===C){const A=y.vnode;Ze(h,A,A.scopeId,A.slotScopeIds,y.parent)}}},K=(h,d,g,v,y,C,A,_,I=0)=>{for(let w=I;w<h.length;w++){const N=h[w]=_?xt(h[w]):lt(h[w]);T(null,N,d,g,v,y,C,A,_)}},be=(h,d,g,v,y,C,A)=>{const _=d.el=h.el;let{patchFlag:I,dynamicChildren:w,dirs:N}=d;I|=h.patchFlag&16;const D=h.props||oe,k=d.props||oe;let V;g&&zt(g,!1),(V=k.onVnodeBeforeUpdate)&&at(V,g,d,h),N&&Kt(d,h,g,"beforeUpdate"),g&&zt(g,!0);const z=y&&d.type!=="foreignObject";if(w?ue(h.dynamicChildren,w,_,g,v,z,C):A||se(h,d,_,null,g,v,z,C,!1),I>0){if(I&16)He(_,d,D,k,g,v,y);else if(I&2&&D.class!==k.class&&i(_,"class",null,k.class,y),I&4&&i(_,"style",D.style,k.style,y),I&8){const re=d.dynamicProps;for(let te=0;te<re.length;te++){const pe=re[te],et=D[pe],gn=k[pe];(gn!==et||pe==="value")&&i(_,pe,et,gn,y,h.children,g,v,yt)}}I&1&&h.children!==d.children&&u(_,d.children)}else!A&&w==null&&He(_,d,D,k,g,v,y);((V=k.onVnodeUpdated)||N)&&$e(()=>{V&&at(V,g,d,h),N&&Kt(d,h,g,"updated")},v)},ue=(h,d,g,v,y,C,A)=>{for(let _=0;_<d.length;_++){const I=h[_],w=d[_],N=I.el&&(I.type===Ke||!Yt(I,w)||I.shapeFlag&70)?f(I.el):g;T(I,w,N,null,v,y,C,A,!0)}},He=(h,d,g,v,y,C,A)=>{if(g!==v){if(g!==oe)for(const _ in g)!ur(_)&&!(_ in v)&&i(h,_,g[_],null,A,d.children,y,C,yt);for(const _ in v){if(ur(_))continue;const I=v[_],w=g[_];I!==w&&_!=="value"&&i(h,_,w,I,A,d.children,y,C,yt)}"value"in v&&i(h,"value",g.value,v.value)}},rt=(h,d,g,v,y,C,A,_,I)=>{const w=d.el=h?h.el:a(""),N=d.anchor=h?h.anchor:a("");let{patchFlag:D,dynamicChildren:k,slotScopeIds:V}=d;V&&(_=_?_.concat(V):V),h==null?(s(w,g,v),s(N,g,v),K(d.children,g,N,y,C,A,_,I)):D>0&&D&64&&k&&h.dynamicChildren?(ue(h.dynamicChildren,k,g,y,C,A,_),(d.key!=null||y&&d===y.subTree)&&Nu(h,d,!0)):se(h,d,g,N,y,C,A,_,I)},mt=(h,d,g,v,y,C,A,_,I)=>{d.slotScopeIds=_,h==null?d.shapeFlag&512?y.ctx.activate(d,g,v,A,I):Xn(d,g,v,y,C,A,I):rc(h,d,I)},Xn=(h,d,g,v,y,C,A)=>{const _=h.component=rg(h,v,y);if(Qr(h)&&(_.ctx.renderer=pn),og(_),_.asyncDep){if(y&&y.registerDep(_,Ve),!h.el){const I=_.subTree=ze(ft);j(null,I,d,g)}return}Ve(_,h,d,g,y,C,A)},rc=(h,d,g)=>{const v=d.component=h.component;if(fp(h,d,g))if(v.asyncDep&&!v.asyncResolved){he(v,d,g);return}else v.next=d,op(v.update),v.update();else d.el=h.el,v.vnode=d},Ve=(h,d,g,v,y,C,A)=>{const _=()=>{if(h.isMounted){let{next:N,bu:D,u:k,parent:V,vnode:z}=h,re=N,te;zt(h,!1),N?(N.el=z.el,he(h,N,A)):N=z,D&&hr(D),(te=N.props&&N.props.onVnodeBeforeUpdate)&&at(te,V,N,z),zt(h,!0);const pe=Ni(h),et=h.subTree;h.subTree=pe,T(et,pe,f(et.el),Xs(et),h,y,C),N.el=pe.el,re===null&&dp(h,pe.el),k&&$e(k,y),(te=N.props&&N.props.onVnodeUpdated)&&$e(()=>at(te,V,N,z),y)}else{let N;const{el:D,props:k}=d,{bm:V,m:z,parent:re}=h,te=os(d);if(zt(h,!1),V&&hr(V),!te&&(N=k&&k.onVnodeBeforeMount)&&at(N,re,d),zt(h,!0),D&&Di){const pe=()=>{h.subTree=Ni(h),Di(D,h.subTree,h,y,null)};te?d.type.__asyncLoader().then(()=>!h.isUnmounted&&pe()):pe()}else{const pe=h.subTree=Ni(h);T(null,pe,g,v,h,y,C),d.el=pe.el}if(z&&$e(z,y),!te&&(N=k&&k.onVnodeMounted)){const pe=d;$e(()=>at(N,re,pe),y)}(d.shapeFlag&256||re&&os(re.vnode)&&re.vnode.shapeFlag&256)&&h.a&&$e(h.a,y),h.isMounted=!0,d=g=v=null}},I=h.effect=new Xo(_,()=>ia(w),h.scope),w=h.update=()=>I.run();w.id=h.uid,zt(h,!0),w()},he=(h,d,g)=>{d.component=h;const v=h.vnode.props;h.vnode=d,h.next=null,$p(h,d.props,v,g),qp(h,d.children,g),jn(),vc(),Hn()},se=(h,d,g,v,y,C,A,_,I=!1)=>{const w=h&&h.children,N=h?h.shapeFlag:0,D=d.children,{patchFlag:k,shapeFlag:V}=d;if(k>0){if(k&128){Ys(w,D,g,v,y,C,A,_,I);return}else if(k&256){Ht(w,D,g,v,y,C,A,_,I);return}}V&8?(N&16&&yt(w,y,C),D!==w&&u(g,D)):N&16?V&16?Ys(w,D,g,v,y,C,A,_,I):yt(w,y,C,!0):(N&8&&u(g,""),V&16&&K(D,g,v,y,C,A,_,I))},Ht=(h,d,g,v,y,C,A,_,I)=>{h=h||En,d=d||En;const w=h.length,N=d.length,D=Math.min(w,N);let k;for(k=0;k<D;k++){const V=d[k]=I?xt(d[k]):lt(d[k]);T(h[k],V,g,null,y,C,A,_,I)}w>N?yt(h,y,C,!0,!1,D):K(d,g,v,y,C,A,_,I,D)},Ys=(h,d,g,v,y,C,A,_,I)=>{let w=0;const N=d.length;let D=h.length-1,k=N-1;for(;w<=D&&w<=k;){const V=h[w],z=d[w]=I?xt(d[w]):lt(d[w]);if(Yt(V,z))T(V,z,g,null,y,C,A,_,I);else break;w++}for(;w<=D&&w<=k;){const V=h[D],z=d[k]=I?xt(d[k]):lt(d[k]);if(Yt(V,z))T(V,z,g,null,y,C,A,_,I);else break;D--,k--}if(w>D){if(w<=k){const V=k+1,z=V<N?d[V].el:v;for(;w<=k;)T(null,d[w]=I?xt(d[w]):lt(d[w]),g,z,y,C,A,_,I),w++}}else if(w>k)for(;w<=D;)it(h[w],y,C,!0),w++;else{const V=w,z=w,re=new Map;for(w=z;w<=k;w++){const qe=d[w]=I?xt(d[w]):lt(d[w]);qe.key!=null&&re.set(qe.key,w)}let te,pe=0;const et=k-z+1;let gn=!1,ac=0;const Jn=new Array(et);for(w=0;w<et;w++)Jn[w]=0;for(w=V;w<=D;w++){const qe=h[w];if(pe>=et){it(qe,y,C,!0);continue}let ot;if(qe.key!=null)ot=re.get(qe.key);else for(te=z;te<=k;te++)if(Jn[te-z]===0&&Yt(qe,d[te])){ot=te;break}ot===void 0?it(qe,y,C,!0):(Jn[ot-z]=w+1,ot>=ac?ac=ot:gn=!0,T(qe,d[ot],g,null,y,C,A,_,I),pe++)}const cc=gn?Qp(Jn):En;for(te=cc.length-1,w=et-1;w>=0;w--){const qe=z+w,ot=d[qe],lc=qe+1<N?d[qe+1].el:v;Jn[w]===0?T(null,ot,g,lc,y,C,A,_,I):gn&&(te<0||w!==cc[te]?qt(ot,g,lc,2):te--)}}},qt=(h,d,g,v,y=null)=>{const{el:C,type:A,transition:_,children:I,shapeFlag:w}=h;if(w&6){qt(h.component.subTree,d,g,v);return}if(w&128){h.suspense.move(d,g,v);return}if(w&64){A.move(h,d,g,pn);return}if(A===Ke){s(C,d,g);for(let D=0;D<I.length;D++)qt(I[D],d,g,v);s(h.anchor,d,g);return}if(A===Oi){F(h,d,g);return}if(v!==2&&w&1&&_)if(v===0)_.beforeEnter(C),s(C,d,g),$e(()=>_.enter(C),y);else{const{leave:D,delayLeave:k,afterLeave:V}=_,z=()=>s(C,d,g),re=()=>{D(C,()=>{z(),V&&V()})};k?k(C,z,re):re()}else s(C,d,g)},it=(h,d,g,v=!1,y=!1)=>{const{type:C,props:A,ref:_,children:I,dynamicChildren:w,shapeFlag:N,patchFlag:D,dirs:k}=h;if(_!=null&&fo(_,null,g,h,!0),N&256){d.ctx.deactivate(h);return}const V=N&1&&k,z=!os(h);let re;if(z&&(re=A&&A.onVnodeBeforeUnmount)&&at(re,d,h),N&6)ud(h.component,g,v);else{if(N&128){h.suspense.unmount(g,v);return}V&&Kt(h,null,d,"beforeUnmount"),N&64?h.type.remove(h,d,g,y,pn,v):w&&(C!==Ke||D>0&&D&64)?yt(w,d,g,!1,!0):(C===Ke&&D&384||!y&&N&16)&&yt(I,d,g),v&&ic(h)}(z&&(re=A&&A.onVnodeUnmounted)||V)&&$e(()=>{re&&at(re,d,h),V&&Kt(h,null,d,"unmounted")},g)},ic=h=>{const{type:d,el:g,anchor:v,transition:y}=h;if(d===Ke){ld(g,v);return}if(d===Oi){ee(h);return}const C=()=>{r(g),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(h.shapeFlag&1&&y&&!y.persisted){const{leave:A,delayLeave:_}=y,I=()=>A(g,C);_?_(h.el,C,I):I()}else C()},ld=(h,d)=>{let g;for(;h!==d;)g=p(h),r(h),h=g;r(d)},ud=(h,d,g)=>{const{bum:v,scope:y,update:C,subTree:A,um:_}=h;v&&hr(v),y.stop(),C&&(C.active=!1,it(A,h,d,g)),_&&$e(_,d),$e(()=>{h.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},yt=(h,d,g,v=!1,y=!1,C=0)=>{for(let A=C;A<h.length;A++)it(h[A],d,g,v,y)},Xs=h=>h.shapeFlag&6?Xs(h.component.subTree):h.shapeFlag&128?h.suspense.next():p(h.anchor||h.el),oc=(h,d,g)=>{h==null?d._vnode&&it(d._vnode,null,null,!0):T(d._vnode||null,h,d,null,null,null,g),vc(),fu(),d._vnode=h},pn={p:T,um:it,m:qt,r:ic,mt:Xn,mc:K,pc:se,pbc:ue,n:Xs,o:t};let Ai,Di;return e&&([Ai,Di]=e(pn)),{render:oc,hydrate:Ai,createApp:zp(oc,Ai)}}function zt({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Nu(t,e,n=!1){const s=t.children,r=e.children;if(B(s)&&B(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=xt(r[i]),a.el=o.el),n||Nu(o,a)),a.type===Xr&&(a.el=o.el)}}function Qp(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const Yp=t=>t.__isTeleport,Ke=Symbol(void 0),Xr=Symbol(void 0),ft=Symbol(void 0),Oi=Symbol(void 0),cs=[];let nt=null;function kt(t=!1){cs.push(nt=t?null:[])}function Xp(){cs.pop(),nt=cs[cs.length-1]||null}let vs=1;function Ac(t){vs+=t}function ku(t){return t.dynamicChildren=vs>0?nt||En:null,Xp(),vs>0&&nt&&nt.push(t),t}function Nn(t,e,n,s,r,i){return ku(ne(t,e,n,s,r,i,!0))}function Mu(t,e,n,s,r){return ku(ze(t,e,n,s,r,!0))}function Ru(t){return t?t.__v_isVNode===!0:!1}function Yt(t,e){return t.type===e.type&&t.key===e.key}const Jr="__vInternal",Ou=({key:t})=>t!=null?t:null,pr=({ref:t,ref_key:e,ref_for:n})=>t!=null?we(t)||ke(t)||H(t)?{i:Me,r:t,k:e,f:!!n}:t:null;function ne(t,e=null,n=null,s=0,r=null,i=t===Ke?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ou(e),ref:e&&pr(e),scopeId:Gr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Me};return a?(ua(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=we(n)?8:16),vs>0&&!o&&nt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&nt.push(c),c}const ze=Jp;function Jp(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Np)&&(t=ft),Ru(t)){const a=Ft(t,e,!0);return n&&ua(a,n),vs>0&&!i&&nt&&(a.shapeFlag&6?nt[nt.indexOf(t)]=a:nt.push(a)),a.patchFlag|=-2,a}if(ug(t)&&(t=t.__vccOpts),e){e=Zp(e);let{class:a,style:c}=e;a&&!we(a)&&(e.class=Ko(a)),le(c)&&(su(c)&&!B(c)&&(c=Pe({},c)),e.style=qo(c))}const o=we(t)?1:pp(t)?128:Yp(t)?64:le(t)?4:H(t)?2:0;return ne(t,e,n,s,r,o,i,!0)}function Zp(t){return t?su(t)||Jr in t?Pe({},t):t:null}function Ft(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?tg(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Ou(a),ref:e&&e.ref?n&&r?B(r)?r.concat(pr(e)):[r,pr(e)]:pr(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ke?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ft(t.ssContent),ssFallback:t.ssFallback&&Ft(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function eg(t=" ",e=0){return ze(Xr,null,t,e)}function lt(t){return t==null||typeof t=="boolean"?ze(ft):B(t)?ze(Ke,null,t.slice()):typeof t=="object"?xt(t):ze(Xr,null,String(t))}function xt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ft(t)}function ua(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(B(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ua(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(Jr in e)?e._ctx=Me:r===3&&Me&&(Me.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else H(e)?(e={default:e,_ctx:Me},n=32):(e=String(e),s&64?(n=16,e=[eg(e)]):n=8);t.children=e,t.shapeFlag|=n}function tg(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ko([e.class,s.class]));else if(r==="style")e.style=qo([e.style,s.style]);else if(jr(r)){const i=e[r],o=s[r];o&&i!==o&&!(B(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function at(t,e,n,s=null){Xe(t,e,7,[n,s])}const ng=Lu();let sg=0;function rg(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||ng,i={uid:sg++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Cd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Su(s,r),emitsOptions:pu(s,r),emit:null,emitted:null,propsDefaults:oe,inheritAttrs:s.inheritAttrs,ctx:oe,data:oe,props:oe,attrs:oe,slots:oe,refs:oe,setupState:oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=lp.bind(null,i),t.ce&&t.ce(i),i}let Se=null;const ig=()=>Se||Me,kn=t=>{Se=t,t.scope.on()},sn=()=>{Se&&Se.scope.off(),Se=null};function Pu(t){return t.vnode.shapeFlag&4}let ws=!1;function og(t,e=!1){ws=e;const{props:n,children:s}=t.vnode,r=Pu(t);Bp(t,n,r,e),Hp(t,s);const i=r?ag(t,e):void 0;return ws=!1,i}function ag(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ru(new Proxy(t.ctx,Rp));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?lg(t):null;kn(t),jn();const i=Nt(s,t,0,[t.props,r]);if(Hn(),sn(),jl(i)){if(i.then(sn,sn),e)return i.then(o=>{Dc(t,o,e)}).catch(o=>{zr(o,t,0)});t.asyncDep=i}else Dc(t,i,e)}else Fu(t,e)}function Dc(t,e,n){H(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:le(e)&&(t.setupState=cu(e)),Fu(t,n)}let xc;function Fu(t,e,n){const s=t.type;if(!t.render){if(!e&&xc&&!s.render){const r=s.template||ca(t).template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Pe(Pe({isCustomElement:i,delimiters:a},o),c);s.render=xc(r,l)}}t.render=s.render||st}kn(t),jn(),Op(t),Hn(),sn()}function cg(t){return new Proxy(t.attrs,{get(e,n){return We(t,"get","$attrs"),e[n]}})}function lg(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=cg(t))},slots:t.slots,emit:t.emit,expose:e}}function Zr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(cu(ru(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in as)return as[n](t)},has(e,n){return n in e||n in as}}))}function ug(t){return H(t)&&"__vccOpts"in t}const Vu=(t,e)=>np(t,e,ws),hg=Symbol(""),fg=()=>fr(hg),dg="3.2.45",pg="http://www.w3.org/2000/svg",Xt=typeof document<"u"?document:null,Lc=Xt&&Xt.createElement("template"),gg={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?Xt.createElementNS(pg,t):Xt.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Xt.createTextNode(t),createComment:t=>Xt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Lc.innerHTML=s?`<svg>${t}</svg>`:t;const a=Lc.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function mg(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function yg(t,e,n){const s=t.style,r=we(n);if(n&&!r){for(const i in n)po(s,i,n[i]);if(e&&!we(e))for(const i in e)n[i]==null&&po(s,i,"")}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const Nc=/\s*!important$/;function po(t,e,n){if(B(n))n.forEach(s=>po(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=vg(t,e);Nc.test(n)?t.setProperty($n(s),n.replace(Nc,""),"important"):t[s]=n}}const kc=["Webkit","Moz","ms"],Pi={};function vg(t,e){const n=Pi[e];if(n)return n;let s=xn(e);if(s!=="filter"&&s in t)return Pi[e]=s;s=Kl(s);for(let r=0;r<kc.length;r++){const i=kc[r]+s;if(i in t)return Pi[e]=i}return e}const Mc="http://www.w3.org/1999/xlink";function wg(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Mc,e.slice(6,e.length)):t.setAttributeNS(Mc,e,n);else{const i=md(e);n==null||i&&!Ul(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Eg(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Ul(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function yn(t,e,n,s){t.addEventListener(e,n,s)}function bg(t,e,n,s){t.removeEventListener(e,n,s)}function Tg(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=_g(e);if(s){const l=i[e]=Sg(s,r);yn(t,a,l,c)}else o&&(bg(t,a,o,c),i[e]=void 0)}}const Rc=/(?:Once|Passive|Capture)$/;function _g(t){let e;if(Rc.test(t)){e={};let s;for(;s=t.match(Rc);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$n(t.slice(2)),e]}let Fi=0;const Cg=Promise.resolve(),Ig=()=>Fi||(Cg.then(()=>Fi=0),Fi=Date.now());function Sg(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Xe(Ag(s,n.value),e,5,[s])};return n.value=t,n.attached=Ig(),n}function Ag(t,e){if(B(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Oc=/^on[a-z]/,Dg=(t,e,n,s,r=!1,i,o,a,c)=>{e==="class"?mg(t,s,r):e==="style"?yg(t,n,s):jr(e)?zo(e)||Tg(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xg(t,e,s,r))?Eg(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),wg(t,e,s,r))};function xg(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&Oc.test(e)&&H(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Oc.test(e)&&we(n)?!1:e in t}const Lg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ep.props;const Pc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return B(e)?n=>hr(e,n):e};function Ng(t){t.target.composing=!0}function Fc(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const kg={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=Pc(r);const i=s||r.props&&r.props.type==="number";yn(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Er(a)),t._assign(a)}),n&&yn(t,"change",()=>{t.value=t.value.trim()}),e||(yn(t,"compositionstart",Ng),yn(t,"compositionend",Fc),yn(t,"change",Fc))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t._assign=Pc(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(r||t.type==="number")&&Er(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},Vi={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zn(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Zn(t,!0),s.enter(t)):s.leave(t,()=>{Zn(t,!1)}):Zn(t,e))},beforeUnmount(t,{value:e}){Zn(t,e)}};function Zn(t,e){t.style.display=e?t._vod:"none"}const Mg=Pe({patchProp:Dg},gg);let Vc;function Rg(){return Vc||(Vc=Wp(Mg))}const Og=(...t)=>{const e=Rg().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Pg(s);if(!r)return;const i=e._component;!H(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Pg(t){return we(t)?document.querySelector(t):t}const ei=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},Fg=t=>(oa("data-v-7201fa60"),t=t(),aa(),t),Vg=Fg(()=>ne("h1",null,"A\xF1adir nuevo video",-1)),Ug={__name:"HeaderComponent",emits:{saveVideos:t=>{if(t.length)return t;throw 404},error:t=>t},setup(t,{emit:e}){const n=_n(""),s="AIzaSyBmLLu8YlvN9ZhoHIII2VIOANa2ss5kgPA",r=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube(-nocookie)?\.com|youtu.be))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,i=new URL("https://www.googleapis.com/youtube/v3/videos");function o(){try{if(!r.test(n.value))throw 400;const c=new URL(n.value).search.split("?v=").pop();i.search=new URLSearchParams({id:c,key:s,part:"snippet"}).toString(),fetch(i).then(l=>l.json()).then(l=>e("saveVideos",l.items)).catch(l=>{l===404&&e("error","Video no encontrado")})}catch(a){n.value.length?(a===400&&e("error","Url invalida"),typeof a=="object"&&(a==null?void 0:a.message.includes("Invalid URL"))&&n.value.length&&e("error","Url invalida")):e("error","Ingresa una URL")}finally{n.value=""}}return(a,c)=>(kt(),Nn("header",null,[Vg,ne("div",null,[dr(ne("input",{type:"text",name:"url","onUpdate:modelValue":c[0]||(c[0]=l=>n.value=l),placeholder:"A\xF1adir"},null,512),[[kg,n.value]]),ne("button",{onClick:o},"A\xF1adir")])]))}},Bg=ei(Ug,[["__scopeId","data-v-7201fa60"]]);const $g={},jg=t=>(oa("data-v-9734f24c"),t=t(),aa(),t),Hg={class:"modal-overlay"},qg={class:"modal"},Kg=jg(()=>ne("svg",{width:"23",height:"23",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ne("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.85615 2.14867C2.66211 1.95219 2.34554 1.9502 2.14905 2.14423C1.95257 2.33827 1.95058 2.65484 2.14461 2.85133L10.5911 11.4046L2.14423 19.9582C1.9502 20.1546 1.95219 20.4712 2.14867 20.6653C2.34516 20.8593 2.66173 20.8573 2.85577 20.6608L11.2938 12.1161L19.7319 20.6608C19.9259 20.8573 20.2425 20.8593 20.439 20.6653C20.6355 20.4712 20.6375 20.1546 20.4434 19.9582L11.9965 11.4046L20.4431 2.85133C20.6371 2.65484 20.6351 2.33827 20.4386 2.14423C20.2421 1.9502 19.9256 1.95219 19.7315 2.14867L11.2938 10.693L2.85615 2.14867Z",fill:"#020202"}),ne("path",{d:"M2.14905 2.14423L1.09507 1.07694L1.09507 1.07694L2.14905 2.14423ZM2.85615 2.14867L3.92344 1.09469L2.85615 2.14867ZM2.14461 2.85133L1.07732 3.90531L1.07732 3.90531L2.14461 2.85133ZM10.5911 11.4046L11.6584 12.4585L12.6993 11.4046L11.6584 10.3506L10.5911 11.4046ZM2.14423 19.9582L1.07694 18.9042L1.07693 18.9042L2.14423 19.9582ZM2.14867 20.6653L1.09469 21.7326L1.0947 21.7326L2.14867 20.6653ZM2.85577 20.6608L3.92306 21.7148H3.92306L2.85577 20.6608ZM11.2938 12.1161L12.3611 11.0622L11.2938 9.98138L10.2265 11.0622L11.2938 12.1161ZM19.7319 20.6608L18.6646 21.7148H18.6646L19.7319 20.6608ZM20.439 20.6653L21.493 21.7326L21.493 21.7326L20.439 20.6653ZM20.4434 19.9582L21.5107 18.9042L21.5107 18.9042L20.4434 19.9582ZM11.9965 11.4046L10.9292 10.3506L9.88842 11.4046L10.9292 12.4585L11.9965 11.4046ZM20.4431 2.85133L19.3758 1.79735L19.3758 1.79735L20.4431 2.85133ZM20.4386 2.14423L21.4926 1.07694L21.4926 1.07693L20.4386 2.14423ZM19.7315 2.14867L18.6642 1.09469L18.6642 1.09469L19.7315 2.14867ZM11.2938 10.693L10.2265 11.7469L11.2938 12.8277L12.3611 11.7469L11.2938 10.693ZM3.20303 3.21153C2.81007 3.5996 2.17691 3.59562 1.78885 3.20265L3.92344 1.09469C3.14731 0.308756 1.88101 0.300807 1.09507 1.07694L3.20303 3.21153ZM3.21191 1.79735C3.59998 2.19031 3.596 2.82347 3.20303 3.21153L1.09507 1.07694C0.309136 1.85307 0.301186 3.11937 1.07732 3.90531L3.21191 1.79735ZM11.6584 10.3506L3.21191 1.79735L1.07732 3.90531L9.52383 12.4585L11.6584 10.3506ZM3.21153 21.0121L11.6584 12.4585L9.52383 10.3506L1.07694 18.9042L3.21153 21.0121ZM3.20266 19.598C3.59562 19.986 3.59959 20.6192 3.21154 21.0121L1.07693 18.9042C0.30081 19.6901 0.308755 20.9564 1.09469 21.7326L3.20266 19.598ZM1.78847 19.6068C2.17654 19.2139 2.80969 19.2099 3.20265 19.598L1.0947 21.7326C1.88063 22.5087 3.14693 22.5007 3.92306 21.7148L1.78847 19.6068ZM10.2265 11.0622L1.78847 19.6068L3.92306 21.7148L12.3611 13.1701L10.2265 11.0622ZM20.7992 19.6068L12.3611 11.0622L10.2265 13.1701L18.6646 21.7148L20.7992 19.6068ZM19.385 19.598C19.778 19.2099 20.4111 19.2139 20.7992 19.6068L18.6646 21.7148C19.4407 22.5007 20.707 22.5087 21.493 21.7326L19.385 19.598ZM19.3761 21.0121C18.9881 20.6192 18.992 19.986 19.385 19.598L21.493 21.7326C22.2789 20.9564 22.2869 19.6901 21.5107 18.9042L19.3761 21.0121ZM10.9292 12.4585L19.3761 21.0121L21.5107 18.9042L13.0638 10.3506L10.9292 12.4585ZM19.3758 1.79735L10.9292 10.3506L13.0638 12.4585L21.5103 3.90531L19.3758 1.79735ZM19.3846 3.21153C18.9917 2.82347 18.9877 2.19031 19.3758 1.79735L21.5103 3.90531C22.2865 3.11937 22.2785 1.85307 21.4926 1.07694L19.3846 3.21153ZM20.7988 3.20265C20.4107 3.59562 19.7776 3.59959 19.3846 3.21154L21.4926 1.07693C20.7067 0.30081 19.4404 0.308754 18.6642 1.09469L20.7988 3.20265ZM12.3611 11.7469L20.7988 3.20265L18.6642 1.09469L10.2265 9.63898L12.3611 11.7469ZM1.78885 3.20265L10.2265 11.7469L12.3611 9.63898L3.92344 1.09469L1.78885 3.20265Z",fill:"#020202"})],-1)),zg=[Kg];function Wg(t,e){return kt(),Nn("div",Hg,[ne("div",qg,[ne("span",{class:"close",onClick:e[0]||(e[0]=n=>t.$emit("close-modal"))},zg),Mp(t.$slots,"default",{},void 0,!0)])])}const Uc=ei($g,[["render",Wg],["__scopeId","data-v-9734f24c"]]);const Uu=t=>(oa("data-v-43da77c3"),t=t(),aa(),t),Gg={class:"video-container"},Qg=["src","alt"],Yg=Uu(()=>ne("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[ne("rect",{width:"24",height:"24",rx:"2",fill:"#F5F5F5"}),ne("path",{d:"M2 24C1.41667 24 0.9375 23.8125 0.5625 23.4375C0.1875 23.0625 0 22.5833 0 22V2C0 1.41667 0.1875 0.9375 0.5625 0.5625C0.9375 0.1875 1.41667 0 2 0H22C22.5833 0 23.0625 0.1875 23.4375 0.5625C23.8125 0.9375 24 1.41667 24 2V22C24 22.5833 23.8125 23.0625 23.4375 23.4375C23.0625 23.8125 22.5833 24 22 24H2ZM12 14L16 18L18 16L14 12L18 8L16 6L12 10L8 6L6 8L10 12L6 16L8 18L12 14Z",fill:"rgb(0,0,0, 0.75)"})],-1)),Xg=[Yg],Jg={class:"delete-modal"},Zg=Uu(()=>ne("h2",null,"\xBFSeguro que quieres eliminar este video?",-1)),em={class:"buttons"},tm={class:"video-info"},nm=["src"],sm={__name:"MiniatureComponent",props:{video:Object},setup(t){const e=t,n="AIzaSyBmLLu8YlvN9ZhoHIII2VIOANa2ss5kgPA",s=_n(""),r=new URL("https://www.googleapis.com/youtube/v3/videos"),i=_n(!1),o=_n(!1);r.search=new URLSearchParams({id:e.video.id,key:n,part:"contentDetails"}).toString(),fetch(r).then(c=>c.json()).then(({items:c})=>c[0].contentDetails).then(({duration:c})=>s.value=c);const a=Vu(()=>{const c={hours:0,minutes:0,seconds:0},l=s.value.replace("PT","").replace("H",":").replace("M",":").replace("S","").split(":");return l.length===3&&(c.hours=l[0],c.minutes=l[1],c.seconds=l[2]),l.length===2&&(c.minutes=l[0],c.seconds=l[1]),l.length===1&&(c.seconds=l[0]),c.hours&&c.minutes?`${c.hours}:${c.minutes}:${c.seconds}`:`${c.minutes}:${c.seconds}`});return(c,l)=>(kt(),Nn("div",Gg,[ne("img",{onClick:l[0]||(l[0]=u=>o.value=!0),src:e.video.snippet.thumbnails.medium.url,alt:e.video.title},null,8,Qg),dr(ne("span",{onClick:l[1]||(l[1]=u=>o.value=!0),class:"time"},xi(au(a)),513),[[Vi,s.value]]),ne("span",{class:"delete",onClick:l[2]||(l[2]=u=>i.value=!0)},Xg),dr(ze(Uc,{onCloseModal:l[5]||(l[5]=u=>i.value=!1)},{default:io(()=>[ne("div",Jg,[Zg,ne("div",em,[ne("button",{class:"button-cancel",onClick:l[3]||(l[3]=u=>i.value=!1)},"Cancelar"),ne("button",{class:"button-delete",onClick:l[4]||(l[4]=u=>{c.$emit("delete"),i.value=!1})},"Eliminar")])])]),_:1},512),[[Vi,i.value]]),dr(ze(Uc,{onCloseModal:l[6]||(l[6]=u=>o.value=!1)},{default:io(()=>[ne("div",tm,[ne("iframe",{src:`https://www.youtube.com/embed/${e.video.id}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},`\r
          `,8,nm),ne("section",null,[ne("h2",null,xi(e.video.snippet.title),1),ne("p",null,xi(e.video.snippet.description),1)])])]),_:1},512),[[Vi,o.value]])]))}},rm=ei(sm,[["__scopeId","data-v-43da77c3"]]);const im={__name:"BodyComponent",props:{videoList:Array},setup(t){const e=t;return(n,s)=>(kt(),Nn("main",null,[(kt(!0),Nn(Ke,null,kp(e.videoList,(r,i)=>(kt(),Mu(rm,{key:i+"-"+r.video.id,video:r.video,onDelete:o=>n.$emit("delete",r.id)},null,8,["video","onDelete"]))),128))]))}},om=ei(im,[["__scopeId","data-v-c541ecf7"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},am=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,m=l&63;c||(m=64,o||(p=64)),s.push(n[u],n[f],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):am(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const l=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||l==null||f==null)throw Error();const p=i<<2|a>>4;if(s.push(p),l!==64){const m=a<<4&240|l>>2;if(s.push(m),f!==64){const S=l<<6&192|f;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},cm=function(t){const e=Bu(t);return $u.encodeByteArray(e,!0)},Cr=function(t){return cm(t).replace(/\./g,"")},lm=function(t){try{return $u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function um(){return typeof indexedDB=="object"}function hm(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function fm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=()=>fm().__FIREBASE_DEFAULTS__,pm=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gm=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lm(t[1]);return e&&JSON.parse(e)},ju=()=>{try{return dm()||pm()||gm()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mm=t=>{var e,n;return(n=(e=ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ym=t=>{const e=mm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},vm=()=>{var t;return(t=ju())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Cr(JSON.stringify(n)),Cr(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="FirebaseError";class qn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=bm,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hu.prototype.create)}}class Hu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Tm(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new qn(r,a,s)}}function Tm(t,e){return t.replace(_m,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const _m=/\{\$([^}]+)}/g;function go(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Bc(i)&&Bc(o)){if(!go(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Bc(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){return t&&t._delegate?t._delegate:t}class Es{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new wm;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sm(e))try{this.getOrInitializeService({instanceIdentifier:Gt})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Gt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gt){return this.instances.has(e)}getOptions(e=Gt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Im(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Gt){return this.component?this.component.multipleInstances?e:Gt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Im(t){return t===Gt?void 0:t}function Sm(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Cm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const Dm={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},xm=X.INFO,Lm={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Nm=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Lm[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qu{constructor(e){this.name=e,this._logLevel=xm,this._logHandler=Nm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}const km=(t,e)=>e.some(n=>t instanceof n);let $c,jc;function Mm(){return $c||($c=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rm(){return jc||(jc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ku=new WeakMap,mo=new WeakMap,zu=new WeakMap,Ui=new WeakMap,ha=new WeakMap;function Om(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mt(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ku.set(n,t)}).catch(()=>{}),ha.set(e,t),e}function Pm(t){if(mo.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});mo.set(t,e)}let yo={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mo.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Fm(t){yo=t(yo)}function Vm(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Bi(this),e,...n);return zu.set(s,e.sort?e.sort():[e]),Mt(s)}:Rm().includes(t)?function(...e){return t.apply(Bi(this),e),Mt(Ku.get(this))}:function(...e){return Mt(t.apply(Bi(this),e))}}function Um(t){return typeof t=="function"?Vm(t):(t instanceof IDBTransaction&&Pm(t),km(t,Mm())?new Proxy(t,yo):t)}function Mt(t){if(t instanceof IDBRequest)return Om(t);if(Ui.has(t))return Ui.get(t);const e=Um(t);return e!==t&&(Ui.set(t,e),ha.set(e,t)),e}const Bi=t=>ha.get(t);function Bm(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Mt(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Mt(o.result),c.oldVersion,c.newVersion,Mt(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const $m=["get","getKey","getAll","getAllKeys","count"],jm=["put","add","delete","clear"],$i=new Map;function Hc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($i.get(e))return $i.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=jm.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||$m.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let l=c.store;return s&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),r&&c.done]))[0]};return $i.set(e,i),i}Fm(t=>({...t,get:(e,n,s)=>Hc(e,n)||t.get(e,n,s),has:(e,n)=>!!Hc(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qm(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qm(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vo="@firebase/app",qc="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new qu("@firebase/app"),Km="@firebase/app-compat",zm="@firebase/analytics-compat",Wm="@firebase/analytics",Gm="@firebase/app-check-compat",Qm="@firebase/app-check",Ym="@firebase/auth",Xm="@firebase/auth-compat",Jm="@firebase/database",Zm="@firebase/database-compat",ey="@firebase/functions",ty="@firebase/functions-compat",ny="@firebase/installations",sy="@firebase/installations-compat",ry="@firebase/messaging",iy="@firebase/messaging-compat",oy="@firebase/performance",ay="@firebase/performance-compat",cy="@firebase/remote-config",ly="@firebase/remote-config-compat",uy="@firebase/storage",hy="@firebase/storage-compat",fy="@firebase/firestore",dy="@firebase/firestore-compat",py="firebase",gy="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]",my={[vo]:"fire-core",[Km]:"fire-core-compat",[Wm]:"fire-analytics",[zm]:"fire-analytics-compat",[Qm]:"fire-app-check",[Gm]:"fire-app-check-compat",[Ym]:"fire-auth",[Xm]:"fire-auth-compat",[Jm]:"fire-rtdb",[Zm]:"fire-rtdb-compat",[ey]:"fire-fn",[ty]:"fire-fn-compat",[ny]:"fire-iid",[sy]:"fire-iid-compat",[ry]:"fire-fcm",[iy]:"fire-fcm-compat",[oy]:"fire-perf",[ay]:"fire-perf-compat",[cy]:"fire-rc",[ly]:"fire-rc-compat",[uy]:"fire-gcs",[hy]:"fire-gcs-compat",[fy]:"fire-fst",[dy]:"fire-fst-compat","fire-js":"fire-js",[py]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Map,Eo=new Map;function yy(t,e){try{t.container.addComponent(e)}catch(n){cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){const e=t.name;if(Eo.has(e))return cn.debug(`There were multiple attempts to register component ${e}.`),!1;Eo.set(e,t);for(const n of Ir.values())yy(n,t);return!0}function vy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Rt=new Hu("app","Firebase",wy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=gy;function Wu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:wo,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw Rt.create("bad-app-name",{appName:String(r)});if(n||(n=vm()),!n)throw Rt.create("no-options");const i=Ir.get(r);if(i){if(go(n,i.options)&&go(s,i.config))return i;throw Rt.create("duplicate-app",{appName:r})}const o=new Am(r);for(const c of Eo.values())o.addComponent(c);const a=new Ey(n,s,o);return Ir.set(r,a),a}function Ty(t=wo){const e=Ir.get(t);if(!e&&t===wo)return Wu();if(!e)throw Rt.create("no-app",{appName:t});return e}function In(t,e,n){var s;let r=(s=my[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cn.warn(a.join(" "));return}Sr(new Es(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="firebase-heartbeat-database",Cy=1,bs="firebase-heartbeat-store";let ji=null;function Gu(){return ji||(ji=Bm(_y,Cy,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bs)}}}).catch(t=>{throw Rt.create("idb-open",{originalErrorMessage:t.message})})),ji}async function Iy(t){var e;try{return(await Gu()).transaction(bs).objectStore(bs).get(Qu(t))}catch(n){if(n instanceof qn)cn.warn(n.message);else{const s=Rt.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});cn.warn(s.message)}}}async function Kc(t,e){var n;try{const r=(await Gu()).transaction(bs,"readwrite");return await r.objectStore(bs).put(e,Qu(t)),r.done}catch(s){if(s instanceof qn)cn.warn(s.message);else{const r=Rt.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});cn.warn(r.message)}}}function Qu(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=1024,Ay=30*24*60*60*1e3;class Dy{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ly(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zc();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=Ay}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zc(),{heartbeatsToSend:n,unsentEntries:s}=xy(this._heartbeatsCache.heartbeats),r=Cr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function zc(){return new Date().toISOString().substring(0,10)}function xy(t,e=Sy){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Wc(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Wc(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ly{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return um()?hm().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Iy(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wc(t){return Cr(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t){Sr(new Es("platform-logger",e=>new Hm(e),"PRIVATE")),Sr(new Es("heartbeat",e=>new Dy(e),"PRIVATE")),In(vo,qc,t),In(vo,qc,"esm2017"),In("fire-js","")}Ny("");var ky="firebase",My="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(ky,My,"app");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x,fa=fa||{},P=Ry||self;function Ar(){}function ti(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Os(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Oy(t){return Object.prototype.hasOwnProperty.call(t,Hi)&&t[Hi]||(t[Hi]=++Py)}var Hi="closure_uid_"+(1e9*Math.random()>>>0),Py=0;function Fy(t,e,n){return t.call.apply(t.bind,arguments)}function Vy(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Re(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Re=Fy:Re=Vy,Re.apply(null,arguments)}function rr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function De(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function $t(){this.s=this.s,this.o=this.o}var Uy=0;$t.prototype.s=!1;$t.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Uy!=0)&&Oy(this)};$t.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Yu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function da(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Gc(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(ti(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Oe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var By=function(){if(!P.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{P.addEventListener("test",Ar,e),P.removeEventListener("test",Ar,e)}catch{}return t}();function Dr(t){return/^[\s\xa0]*$/.test(t)}var Qc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qi(t,e){return t<e?-1:t>e?1:0}function ni(){var t=P.navigator;return t&&(t=t.userAgent)?t:""}function ht(t){return ni().indexOf(t)!=-1}function pa(t){return pa[" "](t),t}pa[" "]=Ar;function $y(t){var e=qy;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var jy=ht("Opera"),Rn=ht("Trident")||ht("MSIE"),Xu=ht("Edge"),bo=Xu||Rn,Ju=ht("Gecko")&&!(ni().toLowerCase().indexOf("webkit")!=-1&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Hy=ni().toLowerCase().indexOf("webkit")!=-1&&!ht("Edge");function Zu(){var t=P.document;return t?t.documentMode:void 0}var xr;e:{var Ki="",zi=function(){var t=ni();if(Ju)return/rv:([^\);]+)(\)|;)/.exec(t);if(Xu)return/Edge\/([\d\.]+)/.exec(t);if(Rn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Hy)return/WebKit\/(\S+)/.exec(t);if(jy)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zi&&(Ki=zi?zi[1]:""),Rn){var Wi=Zu();if(Wi!=null&&Wi>parseFloat(Ki)){xr=String(Wi);break e}}xr=Ki}var qy={};function Ky(){return $y(function(){let t=0;const e=Qc(String(xr)).split("."),n=Qc("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=qi(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||qi(r[2].length==0,i[2].length==0)||qi(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var To;if(P.document&&Rn){var Yc=Zu();To=Yc||parseInt(xr,10)||void 0}else To=void 0;var zy=To;function Ts(t,e){if(Oe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ju){e:{try{pa(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Wy[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ts.X.h.call(this)}}De(Ts,Oe);var Wy={2:"touch",3:"pen",4:"mouse"};Ts.prototype.h=function(){Ts.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ps="closure_listenable_"+(1e6*Math.random()|0),Gy=0;function Qy(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++Gy,this.ba=this.ea=!1}function si(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function ga(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function eh(t){const e={};for(const n in t)e[n]=t[n];return e}const Xc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function th(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Xc.length;i++)n=Xc[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function ri(t){this.src=t,this.g={},this.h=0}ri.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Co(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Qy(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function _o(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=Yu(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(si(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Co(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var ma="closure_lm_"+(1e6*Math.random()|0),Gi={};function nh(t,e,n,s,r){if(s&&s.once)return rh(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)nh(t,e[i],n,s,r);return null}return n=wa(n),t&&t[Ps]?t.N(e,n,Os(s)?!!s.capture:!!s,r):sh(t,e,n,!1,s,r)}function sh(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Os(r)?!!r.capture:!!r,a=va(t);if(a||(t[ma]=a=new ri(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=Yy(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)By||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(oh(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Yy(){function t(n){return e.call(t.src,t.listener,n)}const e=Xy;return t}function rh(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)rh(t,e[i],n,s,r);return null}return n=wa(n),t&&t[Ps]?t.O(e,n,Os(s)?!!s.capture:!!s,r):sh(t,e,n,!0,s,r)}function ih(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)ih(t,e[i],n,s,r);else s=Os(s)?!!s.capture:!!s,n=wa(n),t&&t[Ps]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Co(i,n,s,r),-1<n&&(si(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=va(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Co(e,n,s,r)),(n=-1<t?e[t]:null)&&ya(n))}function ya(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Ps])_o(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(oh(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=va(e))?(_o(n,t),n.h==0&&(n.src=null,e[ma]=null)):si(t)}}}function oh(t){return t in Gi?Gi[t]:Gi[t]="on"+t}function Xy(t,e){if(t.ba)t=!0;else{e=new Ts(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&ya(t),t=n.call(s,e)}return t}function va(t){return t=t[ma],t instanceof ri?t:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function wa(t){return typeof t=="function"?t:(t[Qi]||(t[Qi]=function(e){return t.handleEvent(e)}),t[Qi])}function _e(){$t.call(this),this.i=new ri(this),this.P=this,this.I=null}De(_e,$t);_e.prototype[Ps]=!0;_e.prototype.removeEventListener=function(t,e,n,s){ih(this,t,e,n,s)};function Ae(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Oe(e,t);else if(e instanceof Oe)e.target=e.target||t;else{var r=e;e=new Oe(s,t),th(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=ir(o,s,!0,e)&&r}if(o=e.g=t,r=ir(o,s,!0,e)&&r,r=ir(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=ir(o,s,!1,e)&&r}_e.prototype.M=function(){if(_e.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)si(n[s]);delete t.g[e],t.h--}}this.I=null};_e.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};_e.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function ir(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&_o(t.i,o),r=a.call(c,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ea=P.JSON.stringify;function Jy(){var t=lh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Zy{constructor(){this.h=this.g=null}add(e,n){const s=ah.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var ah=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new ev,t=>t.reset());class ev{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function tv(t){P.setTimeout(()=>{throw t},0)}function ch(t,e){Io||nv(),So||(Io(),So=!0),lh.add(t,e)}var Io;function nv(){var t=P.Promise.resolve(void 0);Io=function(){t.then(sv)}}var So=!1,lh=new Zy;function sv(){for(var t;t=Jy();){try{t.h.call(t.g)}catch(n){tv(n)}var e=ah;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}So=!1}function ii(t,e){_e.call(this),this.h=t||1,this.g=e||P,this.j=Re(this.lb,this),this.l=Date.now()}De(ii,_e);x=ii.prototype;x.ca=!1;x.R=null;x.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ae(this,"tick"),this.ca&&(ba(this),this.start()))}};x.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ba(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}x.M=function(){ii.X.M.call(this),ba(this),delete this.g};function Ta(t,e,n){if(typeof t=="function")n&&(t=Re(t,n));else if(t&&typeof t.handleEvent=="function")t=Re(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:P.setTimeout(t,e||0)}function uh(t){t.g=Ta(()=>{t.g=null,t.i&&(t.i=!1,uh(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class rv extends $t{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uh(this)}M(){super.M(),this.g&&(P.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(t){$t.call(this),this.h=t,this.g={}}De(_s,$t);var Jc=[];function hh(t,e,n,s){Array.isArray(n)||(n&&(Jc[0]=n.toString()),n=Jc);for(var r=0;r<n.length;r++){var i=nh(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function fh(t){ga(t.g,function(e,n){this.g.hasOwnProperty(n)&&ya(e)},t),t.g={}}_s.prototype.M=function(){_s.X.M.call(this),fh(this)};_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function oi(){this.g=!0}oi.prototype.Aa=function(){this.g=!1};function iv(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function ov(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function vn(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+cv(t,n)+(s?" "+s:"")})}function av(t,e){t.info(function(){return"TIMEOUT: "+e})}oi.prototype.info=function(){};function cv(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ea(n)}catch{return e}}var hn={},Zc=null;function ai(){return Zc=Zc||new _e}hn.Pa="serverreachability";function dh(t){Oe.call(this,hn.Pa,t)}De(dh,Oe);function Cs(t){const e=ai();Ae(e,new dh(e))}hn.STAT_EVENT="statevent";function ph(t,e){Oe.call(this,hn.STAT_EVENT,t),this.stat=e}De(ph,Oe);function Be(t){const e=ai();Ae(e,new ph(e,t))}hn.Qa="timingevent";function gh(t,e){Oe.call(this,hn.Qa,t),this.size=e}De(gh,Oe);function Fs(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return P.setTimeout(function(){t()},e)}var ci={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},mh={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _a(){}_a.prototype.h=null;function el(t){return t.h||(t.h=t.i())}function yh(){}var Vs={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ca(){Oe.call(this,"d")}De(Ca,Oe);function Ia(){Oe.call(this,"c")}De(Ia,Oe);var Ao;function li(){}De(li,_a);li.prototype.g=function(){return new XMLHttpRequest};li.prototype.i=function(){return{}};Ao=new li;function Us(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new _s(this),this.O=lv,t=bo?125:void 0,this.T=new ii(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new vh}function vh(){this.i=null,this.g="",this.h=!1}var lv=45e3,Do={},Lr={};x=Us.prototype;x.setTimeout=function(t){this.O=t};function xo(t,e,n){t.K=1,t.v=hi(Tt(e)),t.s=n,t.P=!0,wh(t,null)}function wh(t,e){t.F=Date.now(),Bs(t),t.A=Tt(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),Ah(n.i,"t",s),t.C=0,n=t.l.H,t.h=new vh,t.g=Gh(t.l,n?e:null,!t.s),0<t.N&&(t.L=new rv(Re(t.La,t,t.g),t.N)),hh(t.S,t.g,"readystatechange",t.ib),e=t.H?eh(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Cs(),iv(t.j,t.u,t.A,t.m,t.U,t.s)}x.ib=function(t){t=t.target;const e=this.L;e&&wt(t)==3?e.l():this.La(t)};x.La=function(t){try{if(t==this.g)e:{const u=wt(this.g);var e=this.g.Ea();const f=this.g.aa();if(!(3>u)&&(u!=3||bo||this.g&&(this.h.h||this.g.fa()||rl(this.g)))){this.I||u!=4||e==7||(e==8||0>=f?Cs(3):Cs(2)),ui(this);var n=this.g.aa();this.Y=n;t:if(Eh(this)){var s=rl(this.g);t="";var r=s.length,i=wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),ls(this);var o="";break t}this.h.i=new P.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,ov(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dr(a)){var l=a;break t}}l=null}if(n=l)vn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Lo(this,n);else{this.i=!1,this.o=3,Be(12),Zt(this),ls(this);break e}}this.P?(bh(this,u,o),bo&&this.i&&u==3&&(hh(this.S,this.T,"tick",this.hb),this.T.start())):(vn(this.j,this.m,o,null),Lo(this,o)),u==4&&Zt(this),this.i&&!this.I&&(u==4?qh(this.l,this):(this.i=!1,Bs(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Be(12)):(this.o=0,Be(13)),Zt(this),ls(this)}}}catch{}finally{}};function Eh(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function bh(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=uv(t,n),r==Lr){e==4&&(t.o=4,Be(14),s=!1),vn(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Do){t.o=4,Be(15),vn(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else vn(t.j,t.m,r,null),Lo(t,r);Eh(t)&&r!=Lr&&r!=Do&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Be(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ka(e),e.K=!0,Be(11))):(vn(t.j,t.m,n,"[Invalid Chunked Response]"),Zt(t),ls(t))}x.hb=function(){if(this.g){var t=wt(this.g),e=this.g.fa();this.C<e.length&&(ui(this),bh(this,t,e),this.i&&t!=4&&Bs(this))}};function uv(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Lr:(n=Number(e.substring(n,s)),isNaN(n)?Do:(s+=1,s+n>e.length?Lr:(e=e.substr(s,n),t.C=s+n,e)))}x.cancel=function(){this.I=!0,Zt(this)};function Bs(t){t.V=Date.now()+t.O,Th(t,t.O)}function Th(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Fs(Re(t.gb,t),e)}function ui(t){t.B&&(P.clearTimeout(t.B),t.B=null)}x.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(av(this.j,this.A),this.K!=2&&(Cs(),Be(17)),Zt(this),this.o=2,ls(this)):Th(this,this.V-t)};function ls(t){t.l.G==0||t.I||qh(t.l,t)}function Zt(t){ui(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,ba(t.T),fh(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Lo(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||No(n.h,t))){if(!t.J&&No(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Mr(n),pi(n);else break e;Na(n),Be(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Fs(Re(n.cb,n),6e3));if(1>=Lh(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else en(n,11)}else if((t.J||n.g==t)&&Mr(n),!Dr(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.T=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.I=l[1],n.ka=l[2];const u=l[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const f=l[4];f!=null&&(n.Ca=f,n.j.info("SVER="+n.Ca));const p=l[5];p!=null&&typeof p=="number"&&0<p&&(s=1.5*p,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const m=t.g;if(m){const S=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S){var i=s.h;i.g||S.indexOf("spdy")==-1&&S.indexOf("quic")==-1&&S.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Sa(i,i.h),i.h=null))}if(s.D){const T=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(s.za=T,ae(s.F,s.D,T))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=Wh(s,s.H?s.ka:null,s.V),o.J){Nh(s.h,o);var a=o,c=s.J;c&&a.setTimeout(c),a.B&&(ui(a),Bs(a)),s.g=o}else jh(s);0<n.i.length&&gi(n)}else l[0]!="stop"&&l[0]!="close"||en(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?en(n,7):La(n):l[0]!="noop"&&n.l&&n.l.wa(l),n.A=0)}}Cs(4)}catch{}}function hv(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ti(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function fv(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ti(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function _h(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ti(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=fv(t),s=hv(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var Ch=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dv(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function rn(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof rn){this.h=e!==void 0?e:t.h,Nr(this,t.j),this.s=t.s,this.g=t.g,kr(this,t.m),this.l=t.l,e=t.i;var n=new Is;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),tl(this,n),this.o=t.o}else t&&(n=String(t).match(Ch))?(this.h=!!e,Nr(this,n[1]||"",!0),this.s=ns(n[2]||""),this.g=ns(n[3]||"",!0),kr(this,n[4]),this.l=ns(n[5]||"",!0),tl(this,n[6]||"",!0),this.o=ns(n[7]||"")):(this.h=!!e,this.i=new Is(null,this.h))}rn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ss(e,nl,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ss(e,nl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ss(n,n.charAt(0)=="/"?mv:gv,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ss(n,vv)),t.join("")};function Tt(t){return new rn(t)}function Nr(t,e,n){t.j=n?ns(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function kr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tl(t,e,n){e instanceof Is?(t.i=e,wv(t.i,t.h)):(n||(e=ss(e,yv)),t.i=new Is(e,t.h))}function ae(t,e,n){t.i.set(e,n)}function hi(t){return ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ns(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ss(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,pv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function pv(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nl=/[#\/\?@]/g,gv=/[#\?:]/g,mv=/[#\?]/g,yv=/[#\?@]/g,vv=/#/g;function Is(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function jt(t){t.g||(t.g=new Map,t.h=0,t.i&&dv(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}x=Is.prototype;x.add=function(t,e){jt(this),this.i=null,t=Kn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ih(t,e){jt(t),e=Kn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Sh(t,e){return jt(t),e=Kn(t,e),t.g.has(e)}x.forEach=function(t,e){jt(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};x.oa=function(){jt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};x.W=function(t){jt(this);let e=[];if(typeof t=="string")Sh(this,t)&&(e=e.concat(this.g.get(Kn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};x.set=function(t,e){return jt(this),this.i=null,t=Kn(this,t),Sh(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};x.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Ah(t,e,n){Ih(t,e),0<n.length&&(t.i=null,t.g.set(Kn(t,e),da(n)),t.h+=n.length)}x.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Kn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function wv(t,e){e&&!t.j&&(jt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Ih(this,s),Ah(this,r,n))},t)),t.j=e}var Ev=class{constructor(t,e){this.h=t,this.g=e}};function Dh(t){this.l=t||bv,P.PerformanceNavigationTiming?(t=P.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(P.g&&P.g.Ga&&P.g.Ga()&&P.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bv=10;function xh(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Lh(t){return t.h?1:t.g?t.g.size:0}function No(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sa(t,e){t.g?t.g.add(e):t.h=e}function Nh(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Dh.prototype.cancel=function(){if(this.i=kh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kh(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return da(t.i)}function Aa(){}Aa.prototype.stringify=function(t){return P.JSON.stringify(t,void 0)};Aa.prototype.parse=function(t){return P.JSON.parse(t,void 0)};function Tv(){this.g=new Aa}function _v(t,e,n){const s=n||"";try{_h(t,function(r,i){let o=r;Os(r)&&(o=Ea(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Cv(t,e){const n=new oi;if(P.Image){const s=new Image;s.onload=rr(or,n,s,"TestLoadImage: loaded",!0,e),s.onerror=rr(or,n,s,"TestLoadImage: error",!1,e),s.onabort=rr(or,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=rr(or,n,s,"TestLoadImage: timeout",!1,e),P.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function or(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function $s(t){this.l=t.ac||null,this.j=t.jb||!1}De($s,_a);$s.prototype.g=function(){return new fi(this.l,this.j)};$s.prototype.i=function(t){return function(){return t}}({});function fi(t,e){_e.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}De(fi,_e);var Da=0;x=fi.prototype;x.open=function(t,e){if(this.readyState!=Da)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ss(this)};x.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||P).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=Da};x.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ss(this)),this.g&&(this.readyState=3,Ss(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof P.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mh(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function Mh(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}x.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?js(this):Ss(this),this.readyState==3&&Mh(this)}};x.Va=function(t){this.g&&(this.response=this.responseText=t,js(this))};x.Ua=function(t){this.g&&(this.response=t,js(this))};x.ga=function(){this.g&&js(this)};function js(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ss(t)}x.setRequestHeader=function(t,e){this.v.append(t,e)};x.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};x.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ss(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Iv=P.JSON.parse;function fe(t){_e.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rh,this.K=this.L=!1}De(fe,_e);var Rh="",Sv=/^https?$/i,Av=["POST","PUT"];x=fe.prototype;x.Ka=function(t){this.L=t};x.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ao.g(),this.C=this.u?el(this.u):el(Ao),this.g.onreadystatechange=Re(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){sl(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=P.FormData&&t instanceof P.FormData,!(0<=Yu(Av,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fh(this),0<this.B&&((this.K=Dv(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Re(this.qa,this)):this.A=Ta(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){sl(this,i)}};function Dv(t){return Rn&&Ky()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}x.qa=function(){typeof fa<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ae(this,"timeout"),this.abort(8))};function sl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Oh(t),di(t)}function Oh(t){t.D||(t.D=!0,Ae(t,"complete"),Ae(t,"error"))}x.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ae(this,"complete"),Ae(this,"abort"),di(this))};x.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),di(this,!0)),fe.X.M.call(this)};x.Ha=function(){this.s||(this.F||this.v||this.l?Ph(this):this.fb())};x.fb=function(){Ph(this)};function Ph(t){if(t.h&&typeof fa<"u"&&(!t.C[1]||wt(t)!=4||t.aa()!=2)){if(t.v&&wt(t)==4)Ta(t.Ha,0,t);else if(Ae(t,"readystatechange"),wt(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Ch)[1]||null;if(!r&&P.self&&P.self.location){var i=P.self.location.protocol;r=i.substr(0,i.length-1)}s=!Sv.test(r?r.toLowerCase():"")}n=s}if(n)Ae(t,"complete"),Ae(t,"success");else{t.m=6;try{var o=2<wt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Oh(t)}}finally{di(t)}}}}function di(t,e){if(t.g){Fh(t);const n=t.g,s=t.C[0]?Ar:null;t.g=null,t.C=null,e||Ae(t,"ready");try{n.onreadystatechange=s}catch{}}}function Fh(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(P.clearTimeout(t.A),t.A=null)}function wt(t){return t.g?t.g.readyState:0}x.aa=function(){try{return 2<wt(this)?this.g.status:-1}catch{return-1}};x.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};x.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Iv(e)}};function rl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Rh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}x.Ea=function(){return this.m};x.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Vh(t){let e="";return ga(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function xa(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Vh(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ae(t,e,n))}function es(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Uh(t){this.Ca=0,this.i=[],this.j=new oi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=es("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=es("baseRetryDelayMs",5e3,t),this.bb=es("retryDelaySeedMs",1e4,t),this.$a=es("forwardChannelMaxRetries",2,t),this.ta=es("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Dh(t&&t.concurrentRequestLimit),this.Fa=new Tv,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}x=Uh.prototype;x.ma=8;x.G=1;function La(t){if(Bh(t),t.G==3){var e=t.U++,n=Tt(t.F);ae(n,"SID",t.I),ae(n,"RID",e),ae(n,"TYPE","terminate"),Hs(t,n),e=new Us(t,t.j,e,void 0),e.K=2,e.v=hi(Tt(n)),n=!1,P.navigator&&P.navigator.sendBeacon&&(n=P.navigator.sendBeacon(e.v.toString(),"")),!n&&P.Image&&(new Image().src=e.v,n=!0),n||(e.g=Gh(e.l,null),e.g.da(e.v)),e.F=Date.now(),Bs(e)}zh(t)}function pi(t){t.g&&(ka(t),t.g.cancel(),t.g=null)}function Bh(t){pi(t),t.u&&(P.clearTimeout(t.u),t.u=null),Mr(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&P.clearTimeout(t.m),t.m=null)}function gi(t){xh(t.h)||t.m||(t.m=!0,ch(t.Ja,t),t.C=0)}function xv(t,e){return Lh(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Fs(Re(t.Ja,t,e),Kh(t,t.C)),t.C++,!0)}x.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Us(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=eh(i),th(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$h(this,r,e),n=Tt(this.F),ae(n,"RID",t),ae(n,"CVER",22),this.D&&ae(n,"X-HTTP-Session-Id",this.D),Hs(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Vh(i)))+"&"+e:this.o&&xa(n,this.o,i)),Sa(this.h,r),this.Ya&&ae(n,"TYPE","init"),this.O?(ae(n,"$req",e),ae(n,"SID","null"),r.Z=!0,xo(r,n,null)):xo(r,n,e),this.G=2}}else this.G==3&&(t?il(this,t):this.i.length==0||xh(this.h)||il(this))};function il(t,e){var n;e?n=e.m:n=t.U++;const s=Tt(t.F);ae(s,"SID",t.I),ae(s,"RID",n),ae(s,"AID",t.T),Hs(t,s),t.o&&t.s&&xa(s,t.o,t.s),n=new Us(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=$h(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Sa(t.h,n),xo(n,s,e)}function Hs(t,e){t.ia&&ga(t.ia,function(n,s){ae(e,s,n)}),t.l&&_h({},function(n,s){ae(e,s,n)})}function $h(t,e,n){n=Math.min(t.i.length,n);var s=t.l?Re(t.l.Ra,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=r[c].h;const u=r[c].g;if(l-=i,0>l)i=Math.max(0,r[c].h-100),a=!1;else try{_v(u,o,"req"+l+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function jh(t){t.g||t.u||(t.Z=1,ch(t.Ia,t),t.A=0)}function Na(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Fs(Re(t.Ia,t),Kh(t,t.A)),t.A++,!0)}x.Ia=function(){if(this.u=null,Hh(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Fs(Re(this.eb,this),t)}};x.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Be(10),pi(this),Hh(this))};function ka(t){t.B!=null&&(P.clearTimeout(t.B),t.B=null)}function Hh(t){t.g=new Us(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Tt(t.sa);ae(e,"RID","rpc"),ae(e,"SID",t.I),ae(e,"CI",t.L?"0":"1"),ae(e,"AID",t.T),ae(e,"TYPE","xmlhttp"),Hs(t,e),t.o&&t.s&&xa(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=hi(Tt(e)),n.s=null,n.P=!0,wh(n,t)}x.cb=function(){this.v!=null&&(this.v=null,pi(this),Na(this),Be(19))};function Mr(t){t.v!=null&&(P.clearTimeout(t.v),t.v=null)}function qh(t,e){var n=null;if(t.g==e){Mr(t),ka(t),t.g=null;var s=2}else if(No(t.h,e))n=e.D,Nh(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=ai(),Ae(s,new gh(s,n)),gi(t)}else jh(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&xv(t,e)||s==2&&Na(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:en(t,5);break;case 4:en(t,10);break;case 3:en(t,6);break;default:en(t,2)}}}function Kh(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function en(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=Re(t.kb,t);n||(n=new rn("//www.google.com/images/cleardot.gif"),P.location&&P.location.protocol=="http"||Nr(n,"https"),hi(n)),Cv(n.toString(),s)}else Be(2);t.G=0,t.l&&t.l.va(e),zh(t),Bh(t)}x.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function zh(t){if(t.G=0,t.la=[],t.l){const e=kh(t.h);(e.length!=0||t.i.length!=0)&&(Gc(t.la,e),Gc(t.la,t.i),t.h.i.length=0,da(t.i),t.i.length=0),t.l.ua()}}function Wh(t,e,n){var s=n instanceof rn?Tt(n):new rn(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),kr(s,s.m);else{var r=P.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new rn(null,void 0);s&&Nr(i,s),e&&(i.g=e),r&&kr(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&ae(s,n,e),ae(s,"VER",t.ma),Hs(t,s),s}function Gh(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new fe(new $s({jb:!0})):new fe(t.ra),e.Ka(t.H),e}function Qh(){}x=Qh.prototype;x.xa=function(){};x.wa=function(){};x.va=function(){};x.ua=function(){};x.Ra=function(){};function Rr(){if(Rn&&!(10<=Number(zy)))throw Error("Environmental error: no available transport.")}Rr.prototype.g=function(t,e){return new Ge(t,e)};function Ge(t,e){_e.call(this),this.g=new Uh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Dr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dr(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new zn(this)}De(Ge,_e);Ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Be(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=Wh(t,null,t.V),gi(t)};Ge.prototype.close=function(){La(this.g)};Ge.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ea(t),t=n);e.i.push(new Ev(e.ab++,t)),e.G==3&&gi(e)};Ge.prototype.M=function(){this.g.l=null,delete this.j,La(this.g),delete this.g,Ge.X.M.call(this)};function Yh(t){Ca.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}De(Yh,Ca);function Xh(){Ia.call(this),this.status=1}De(Xh,Ia);function zn(t){this.g=t}De(zn,Qh);zn.prototype.xa=function(){Ae(this.g,"a")};zn.prototype.wa=function(t){Ae(this.g,new Yh(t))};zn.prototype.va=function(t){Ae(this.g,new Xh)};zn.prototype.ua=function(){Ae(this.g,"b")};Rr.prototype.createWebChannel=Rr.prototype.g;Ge.prototype.send=Ge.prototype.u;Ge.prototype.open=Ge.prototype.m;Ge.prototype.close=Ge.prototype.close;ci.NO_ERROR=0;ci.TIMEOUT=8;ci.HTTP_ERROR=6;mh.COMPLETE="complete";yh.EventType=Vs;Vs.OPEN="a";Vs.CLOSE="b";Vs.ERROR="c";Vs.MESSAGE="d";_e.prototype.listen=_e.prototype.N;fe.prototype.listenOnce=fe.prototype.O;fe.prototype.getLastError=fe.prototype.Oa;fe.prototype.getLastErrorCode=fe.prototype.Ea;fe.prototype.getStatus=fe.prototype.aa;fe.prototype.getResponseJson=fe.prototype.Sa;fe.prototype.getResponseText=fe.prototype.fa;fe.prototype.send=fe.prototype.da;fe.prototype.setWithCredentials=fe.prototype.Ka;var Lv=function(){return new Rr},Nv=function(){return ai()},Yi=ci,kv=mh,Mv=hn,ol={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Rv=$s,ar=yh,Ov=fe;const al="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wn="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln=new qu("@firebase/firestore");function cl(){return ln.logLevel}function L(t,...e){if(ln.logLevel<=X.DEBUG){const n=e.map(Ma);ln.debug(`Firestore (${Wn}): ${t}`,...n)}}function _t(t,...e){if(ln.logLevel<=X.ERROR){const n=e.map(Ma);ln.error(`Firestore (${Wn}): ${t}`,...n)}}function ko(t,...e){if(ln.logLevel<=X.WARN){const n=e.map(Ma);ln.warn(`Firestore (${Wn}): ${t}`,...n)}}function Ma(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t="Unexpected state"){const e=`FIRESTORE (${Wn}) INTERNAL ASSERTION FAILED: `+t;throw _t(e),new Error(e)}function ie(t,e){t||U()}function $(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xe.UNAUTHENTICATED))}shutdown(){}}class Fv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vv{constructor(e){this.t=e,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new on;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new on,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new on)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ie(typeof s.accessToken=="string"),new Jh(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new xe(e)}}class Uv{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ie(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Bv{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new Uv(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.A=n.token,new $v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=Hv(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function J(t,e){return t<e?-1:t>e?1:0}function On(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ye(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new ye(0,0))}static max(){return new q(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,s){n===void 0?n=0:n>e.length&&U(),s===void 0?s=e.length-n:s>e.length-n&&U(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends As{construct(e,n,s){return new ce(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new O(b.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const qv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ne extends As{construct(e,n,s){return new Ne(e,n,s)}static isValidIdentifier(e){return qv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ne.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ne(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new O(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new O(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new O(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ne(n)}static emptyPath(){return new Ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.path=e}static fromPath(e){return new R(ce.fromString(e))}static fromName(e){return new R(ce.fromString(e).popFirst(5))}static empty(){return new R(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new R(new ce(e.slice()))}}function Kv(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=q.fromTimestamp(s===1e9?new ye(n+1,0):new ye(n,s));return new Vt(r,R.empty(),e)}function zv(t){return new Vt(t.readTime,t.key,-1)}class Vt{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Vt(q.min(),R.empty(),-1)}static max(){return new Vt(q.max(),R.empty(),-1)}}function Wv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=R.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==Gv)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&U(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,s)=>{n(e)})}static reject(e){return new E((n,s)=>{s(e)})}static waitFor(e){return new E((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=E.resolve(!1);for(const s of e)n=n.next(r=>r?E.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new E((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new E((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Ks(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ef(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra.at=-1;class Ee{constructor(e,n){this.comparator=e,this.root=n||Ce.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ce.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ce.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cr(this.root,e,this.comparator,!1)}getReverseIterator(){return new cr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cr(this.root,e,this.comparator,!0)}}class cr{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ce{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Ce.RED,this.left=r!=null?r:Ce.EMPTY,this.right=i!=null?i:Ce.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Ce(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ce.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ce.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw U();const e=this.left.check();if(e!==this.right.check())throw U();return e+(this.isRed()?0:1)}}Ce.EMPTY=null,Ce.RED=!0,Ce.BLACK=!1;Ce.EMPTY=new class{constructor(){this.size=0}get key(){throw U()}get value(){throw U()}get color(){throw U()}get left(){throw U()}get right(){throw U()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Ce(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ul(this.data.getIterator())}getIteratorFrom(e){return new ul(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ve(this.comparator);return n.data=e,n}}class ul{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.fields=e,e.sort(Ne.comparator)}static empty(){return new dt([])}unionWith(e){let n=new ve(Ne.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return On(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Fe(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Fe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fe.EMPTY_BYTE_STRING=new Fe("");const Yv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ut(t){if(ie(!!t),typeof t=="string"){let e=0;const n=Yv.exec(t);if(ie(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:me(t.seconds),nanos:me(t.nanos)}}function me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pn(t){return typeof t=="string"?Fe.fromBase64String(t):Fe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nf(t){const e=t.mapValue.fields.__previous_value__;return tf(e)?nf(e):e}function Ds(t){const e=Ut(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,s,r,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class xs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}function mi(t){return t==null}function Or(t){return t===0&&1/t==-1/0}function Jv(t){return typeof t=="number"&&Number.isInteger(t)&&!Or(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function un(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tf(t)?4:Zv(t)?9007199254740991:10:U()}function gt(t,e){if(t===e)return!0;const n=un(t);if(n!==un(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ds(t).isEqual(Ds(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=Ut(s.timestampValue),o=Ut(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Pn(s.bytesValue).isEqual(Pn(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return me(s.geoPointValue.latitude)===me(r.geoPointValue.latitude)&&me(s.geoPointValue.longitude)===me(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return me(s.integerValue)===me(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=me(s.doubleValue),o=me(r.doubleValue);return i===o?Or(i)===Or(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return On(t.arrayValue.values||[],e.arrayValue.values||[],gt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(ll(i)!==ll(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!gt(i[a],o[a])))return!1;return!0}(t,e);default:return U()}}function Ls(t,e){return(t.values||[]).find(n=>gt(n,e))!==void 0}function Fn(t,e){if(t===e)return 0;const n=un(t),s=un(e);if(n!==s)return J(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=me(r.integerValue||r.doubleValue),a=me(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return hl(t.timestampValue,e.timestampValue);case 4:return hl(Ds(t),Ds(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Pn(r),a=Pn(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=J(o[c],a[c]);if(l!==0)return l}return J(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=J(me(r.latitude),me(i.latitude));return o!==0?o:J(me(r.longitude),me(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=Fn(o[c],a[c]);if(l)return l}return J(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===lr.mapValue&&i===lr.mapValue)return 0;if(r===lr.mapValue)return 1;if(i===lr.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=i.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const f=J(a[u],l[u]);if(f!==0)return f;const p=Fn(o[a[u]],c[l[u]]);if(p!==0)return p}return J(a.length,l.length)}(t.mapValue,e.mapValue);default:throw U()}}function hl(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Ut(t),s=Ut(e),r=J(n.seconds,s.seconds);return r!==0?r:J(n.nanos,s.nanos)}function Sn(t){return Mo(t)}function Mo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=Ut(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Pn(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,R.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=Mo(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Mo(s.fields[a])}`;return i+"}"}(t.mapValue):U();var e,n}function Ro(t){return!!t&&"integerValue"in t}function Oa(t){return!!t&&"arrayValue"in t}function fl(t){return!!t&&"nullValue"in t}function dl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gr(t){return!!t&&"mapValue"in t}function us(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=us(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=us(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Zv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.value=e}static empty(){return new Ye({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gr(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=us(n)}setAll(e){let n=Ne.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=us(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());gr(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];gr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Gn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ye(us(this.value))}}function sf(t){const e=[];return Gn(t.fields,(n,s)=>{const r=new Ne([n]);if(gr(s)){const i=sf(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ie(e,0,q.min(),q.min(),Ye.empty(),0)}static newFoundDocument(e,n,s){return new Ie(e,1,n,q.min(),s,0)}static newNoDocument(e,n){return new Ie(e,2,n,q.min(),Ye.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,q.min(),Ye.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function pl(t,e=null,n=[],s=[],r=null,i=null,o=null){return new e0(t,e,n,s,r,i,o)}function Pa(t){const e=$(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+Sn(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),mi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Sn(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Sn(s)).join(",")),e.ht=n}return e.ht}function t0(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${Sn(s.value)}`;var s}).join(", ")}]`),mi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Sn(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Sn(n)).join(",")),`Target(${e})`}function Fa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!l0(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!gt(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ml(t.startAt,e.startAt)&&ml(t.endAt,e.endAt)}function Oo(t){return R.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class je extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new n0(e,n,s):n==="array-contains"?new i0(e,s):n==="in"?new o0(e,s):n==="not-in"?new a0(e,s):n==="array-contains-any"?new c0(e,s):new je(e,n,s)}static lt(e,n,s){return n==="in"?new s0(e,s):new r0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(Fn(n,this.value)):n!==null&&un(this.value)===un(n)&&this.ft(Fn(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return U()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class n0 extends je{constructor(e,n,s){super(e,n,s),this.key=R.fromName(s.referenceValue)}matches(e){const n=R.comparator(e.key,this.key);return this.ft(n)}}class s0 extends je{constructor(e,n){super(e,"in",n),this.keys=rf("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class r0 extends je{constructor(e,n){super(e,"not-in",n),this.keys=rf("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rf(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>R.fromName(s.referenceValue))}class i0 extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oa(n)&&Ls(n.arrayValue,this.value)}}class o0 extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ls(this.value.arrayValue,n)}}class a0 extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ls(this.value.arrayValue,n)}}class c0 extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ls(this.value.arrayValue,s))}}class Pr{constructor(e,n){this.position=e,this.inclusive=n}}class hs{constructor(e,n="asc"){this.field=e,this.dir=n}}function l0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function gl(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=R.comparator(R.fromName(o.referenceValue),n.key):s=Fn(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ml(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this._t=null,this.wt=null,this.startAt,this.endAt}}function u0(t,e,n,s,r,i,o,a){return new yi(t,e,n,s,r,i,o,a)}function Va(t){return new yi(t)}function yl(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function f0(t){for(const e of t.filters)if(e.dt())return e.field;return null}function d0(t){return t.collectionGroup!==null}function Ns(t){const e=$(t);if(e._t===null){e._t=[];const n=f0(e),s=h0(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new hs(n)),e._t.push(new hs(Ne.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new hs(Ne.keyField(),i))}}}return e._t}function Ct(t){const e=$(t);if(!e.wt)if(e.limitType==="F")e.wt=pl(e.path,e.collectionGroup,Ns(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Ns(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new hs(i.field,o))}const s=e.endAt?new Pr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Pr(e.startAt.position,e.startAt.inclusive):null;e.wt=pl(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function Po(t,e,n){return new yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vi(t,e){return Fa(Ct(t),Ct(e))&&t.limitType===e.limitType}function of(t){return`${Pa(Ct(t))}|lt:${t.limitType}`}function Fo(t){return`Query(target=${t0(Ct(t))}; limitType=${t.limitType})`}function Ua(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):R.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=gl(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Ns(n),s)||n.endAt&&!function(r,i,o){const a=gl(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Ns(n),s))}(t,e)}function p0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function af(t){return(e,n)=>{let s=!1;for(const r of Ns(t)){const i=g0(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function g0(t,e,n){const s=t.field.isKeyField()?R.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),c=o.data.field(r);return a!==null&&c!==null?Fn(a,c):U()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return U()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Or(e)?"-0":e}}function lf(t){return{integerValue:""+t}}function m0(t,e){return Jv(e)?lf(e):cf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this._=void 0}}function y0(t,e,n){return t instanceof Fr?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof ks?hf(t,e):t instanceof Ms?ff(t,e):function(s,r){const i=uf(s,r),o=vl(i)+vl(s.yt);return Ro(i)&&Ro(s.yt)?lf(o):cf(s.It,o)}(t,e)}function v0(t,e,n){return t instanceof ks?hf(t,e):t instanceof Ms?ff(t,e):n}function uf(t,e){return t instanceof Vr?Ro(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Fr extends wi{}class ks extends wi{constructor(e){super(),this.elements=e}}function hf(t,e){const n=df(e);for(const s of t.elements)n.some(r=>gt(r,s))||n.push(s);return{arrayValue:{values:n}}}class Ms extends wi{constructor(e){super(),this.elements=e}}function ff(t,e){let n=df(e);for(const s of t.elements)n=n.filter(r=>!gt(r,s));return{arrayValue:{values:n}}}class Vr extends wi{constructor(e,n){super(),this.It=e,this.yt=n}}function vl(t){return me(t.integerValue||t.doubleValue)}function df(t){return Oa(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function w0(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ks&&s instanceof ks||n instanceof Ms&&s instanceof Ms?On(n.elements,s.elements,gt):n instanceof Vr&&s instanceof Vr?gt(n.yt,s.yt):n instanceof Fr&&s instanceof Fr}(t.transform,e.transform)}class E0{constructor(e,n){this.version=e,this.transformResults=n}}class pt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mr(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ei{}function pf(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ba(t.key,pt.none()):new zs(t.key,t.data,pt.none());{const n=t.data,s=Ye.empty();let r=new ve(Ne.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new fn(t.key,s,new dt(r.toArray()),pt.none())}}function b0(t,e,n){t instanceof zs?function(s,r,i){const o=s.value.clone(),a=El(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof fn?function(s,r,i){if(!mr(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=El(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(gf(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function fs(t,e,n,s){return t instanceof zs?function(r,i,o,a){if(!mr(r.precondition,i))return o;const c=r.value.clone(),l=bl(r.fieldTransforms,a,i);return c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof fn?function(r,i,o,a){if(!mr(r.precondition,i))return o;const c=bl(r.fieldTransforms,a,i),l=i.data;return l.setAll(gf(r)),l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,s):function(r,i,o){return mr(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function T0(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=uf(s.transform,r||null);i!=null&&(n===null&&(n=Ye.empty()),n.set(s.field,i))}return n||null}function wl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&On(n,s,(r,i)=>w0(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zs extends Ei{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fn extends Ei{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gf(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function El(t,e,n){const s=new Map;ie(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,v0(o,a,n[r]))}return s}function bl(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,y0(i,o,e))}return s}class Ba extends Ei{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _0 extends Ei{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge,G;function I0(t){switch(t){default:return U();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function mf(t){if(t===void 0)return _t("GRPC error has no .code"),b.UNKNOWN;switch(t){case ge.OK:return b.OK;case ge.CANCELLED:return b.CANCELLED;case ge.UNKNOWN:return b.UNKNOWN;case ge.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case ge.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case ge.INTERNAL:return b.INTERNAL;case ge.UNAVAILABLE:return b.UNAVAILABLE;case ge.UNAUTHENTICATED:return b.UNAUTHENTICATED;case ge.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case ge.NOT_FOUND:return b.NOT_FOUND;case ge.ALREADY_EXISTS:return b.ALREADY_EXISTS;case ge.PERMISSION_DENIED:return b.PERMISSION_DENIED;case ge.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case ge.ABORTED:return b.ABORTED;case ge.OUT_OF_RANGE:return b.OUT_OF_RANGE;case ge.UNIMPLEMENTED:return b.UNIMPLEMENTED;case ge.DATA_LOSS:return b.DATA_LOSS;default:return U()}}(G=ge||(ge={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Gn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return ef(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Ee(R.comparator);function It(){return S0}const yf=new Ee(R.comparator);function rs(...t){let e=yf;for(const n of t)e=e.insert(n.key,n);return e}function vf(t){let e=yf;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function tn(){return ds()}function wf(){return ds()}function ds(){return new Qn(t=>t.toString(),(t,e)=>t.isEqual(e))}const A0=new Ee(R.comparator),D0=new ve(R.comparator);function W(...t){let e=D0;for(const n of t)e=e.add(n);return e}const x0=new ve(J);function Ef(){return x0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Ws.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bi(q.min(),r,Ef(),It(),W())}}class Ws{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ws(s,n,W(),W(),W())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class bf{constructor(e,n){this.targetId=e,this.At=n}}class Tf{constructor(e,n,s=Fe.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Tl{constructor(){this.Rt=0,this.bt=Cl(),this.Pt=Fe.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=W(),n=W(),s=W();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:U()}}),new Ws(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=Cl()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class L0{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=It(),this.qt=_l(),this.Kt=new ve(J)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:U()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(Oo(i))if(s===0){const o=new R(i.path);this.jt(n,o,Ie.newNoDocument(o,q.min()))}else ie(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&Oo(a.target)){const c=new R(a.target.path);this.Ut.get(c)!==null||this.ee(o,c)||this.jt(o,c,Ie.newNoDocument(c,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=W();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Xt(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new bi(e,n,this.Kt,this.Ut,s);return this.Ut=It(),this.qt=_l(),this.Kt=new ve(J),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new Tl,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new ve(J),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Tl),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function _l(){return new Ee(R.comparator)}function Cl(){return new Ee(R.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),k0=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class M0{constructor(e,n){this.databaseId=e,this.gt=n}}function Ur(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _f(t,e){return t.gt?e.toBase64():e.toUint8Array()}function R0(t,e){return Ur(t,e.toTimestamp())}function Et(t){return ie(!!t),q.fromTimestamp(function(e){const n=Ut(e);return new ye(n.seconds,n.nanos)}(t))}function $a(t,e){return function(n){return new ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Cf(t){const e=ce.fromString(t);return ie(Af(e)),e}function Vo(t,e){return $a(t.databaseId,e.path)}function Xi(t,e){const n=Cf(e);if(n.get(1)!==t.databaseId.projectId)throw new O(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new R(If(n))}function Uo(t,e){return $a(t.databaseId,e)}function O0(t){const e=Cf(t);return e.length===4?ce.emptyPath():If(e)}function Bo(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function If(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Il(t,e,n){return{name:Vo(t,e),fields:n.value.mapValue.fields}}function P0(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:U()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,l){return c.gt?(ie(l===void 0||typeof l=="string"),Fe.fromBase64String(l||"")):(ie(l===void 0||l instanceof Uint8Array),Fe.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?b.UNKNOWN:mf(c.code);return new O(l,c.message||"")}(o);n=new Tf(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Xi(t,s.document.name),i=Et(s.document.updateTime),o=new Ye({mapValue:{fields:s.document.fields}}),a=Ie.newFoundDocument(r,i,o),c=s.targetIds||[],l=s.removedTargetIds||[];n=new yr(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Xi(t,s.document),i=s.readTime?Et(s.readTime):q.min(),o=Ie.newNoDocument(r,i),a=s.removedTargetIds||[];n=new yr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Xi(t,s.document),i=s.removedTargetIds||[];n=new yr([],i,r,null)}else{if(!("filter"in e))return U();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new C0(r),o=s.targetId;n=new bf(o,i)}}return n}function F0(t,e){let n;if(e instanceof zs)n={update:Il(t,e.key,e.value)};else if(e instanceof Ba)n={delete:Vo(t,e.key)};else if(e instanceof fn)n={update:Il(t,e.key,e.data),updateMask:W0(e.fieldMask)};else{if(!(e instanceof _0))return U();n={verify:Vo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Fr)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ks)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ms)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vr)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw U()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:R0(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:U()}(t,e.precondition)),n}function V0(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?Et(s.updateTime):Et(r);return i.isEqual(q.min())&&(i=Et(r)),new E0(i,s.transformResults||[])}(n,e))):[]}function U0(t,e){return{documents:[Uo(t,e.path)]}}function B0(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=Uo(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Uo(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(c){if(c.length===0)return;const l=c.map(u=>function(f){if(f.op==="=="){if(dl(f.value))return{unaryFilter:{field:mn(f.field),op:"IS_NAN"}};if(fl(f.value))return{unaryFilter:{field:mn(f.field),op:"IS_NULL"}}}else if(f.op==="!="){if(dl(f.value))return{unaryFilter:{field:mn(f.field),op:"IS_NOT_NAN"}};if(fl(f.value))return{unaryFilter:{field:mn(f.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mn(f.field),op:q0(f.op),value:f.value}}}(u));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:mn(u.field),direction:H0(u.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(c,l){return c.gt||mi(l)?l:{value:l}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function $0(t){let e=O0(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ie(s===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=Sf(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(f){return new hs(wn(f.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(u)));let a=null;n.limit&&(a=function(u){let f;return f=typeof u=="object"?u.value:u,mi(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(u){const f=!!u.before,p=u.values||[];return new Pr(p,f)}(n.startAt));let l=null;return n.endAt&&(l=function(u){const f=!u.before,p=u.values||[];return new Pr(p,f)}(n.endAt)),u0(e,r,o,i,a,"F",c,l)}function j0(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return U()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sf(t){return t?t.unaryFilter!==void 0?[z0(t)]:t.fieldFilter!==void 0?[K0(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Sf(e)).reduce((e,n)=>e.concat(n)):U():[]}function H0(t){return N0[t]}function q0(t){return k0[t]}function mn(t){return{fieldPath:t.canonicalString()}}function wn(t){return Ne.fromServerFormat(t.fieldPath)}function K0(t){return je.create(wn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return U()}}(t.fieldFilter.op),t.fieldFilter.value)}function z0(t){switch(t.unaryFilter.op){case"IS_NAN":const e=wn(t.unaryFilter.field);return je.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=wn(t.unaryFilter.field);return je.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wn(t.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=wn(t.unaryFilter.field);return je.create(r,"!=",{nullValue:"NULL_VALUE"});default:return U()}}function W0(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Af(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&b0(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=fs(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=fs(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=wf();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=pf(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(q.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),W())}isEqual(e){return this.batchId===e.batchId&&On(this.mutations,e.mutations,(n,s)=>wl(n,s))&&On(this.baseMutations,e.baseMutations,(n,s)=>wl(n,s))}}class ja{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ie(e.mutations.length===s.length);let r=A0;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ja(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,s,r,i=q.min(),o=q.min(),a=Fe.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new an(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.re=e}}function X0(t){const e=$0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Po(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.Ye=new Z0}addToCollectionParentIndex(e,n){return this.Ye.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(Vt.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(Vt.min())}updateCollectionGroup(e,n,s){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class Z0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ve(ce.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ve(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Vn(0)}static vn(){return new Vn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.changes=new Qn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ie.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?E.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&fs(s.mutation,r,dt.empty(),ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,W()).next(()=>s))}getLocalViewOfDocuments(e,n,s=W()){const r=tn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=rs();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=tn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,W()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=It();const o=ds(),a=ds();return n.forEach((c,l)=>{const u=s.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof fn)?i=i.insert(l.key,l):u!==void 0&&(o.set(l.key,u.mutation.getFieldMask()),fs(u.mutation,l,u.mutation.getFieldMask(),ye.now()))}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var f;return a.set(l,new t1(u,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const s=ds();let r=new Ee((o,a)=>o-a),i=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=s.get(c)||dt.empty();u=a.applyToLocalView(l,u),s.set(c,u);const f=(r.get(a.batchId)||W()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,f=wf();u.forEach(p=>{if(!i.has(p)){const m=pf(n.get(p),s.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return E.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return R.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):E.resolve(tn());let a=-1,c=i;return o.next(l=>E.forEach(l,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?E.resolve():this.getBaseDocument(e,u,f).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,W())).next(u=>({batchId:a,changes:vf(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new R(n)).next(s=>{let r=rs();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=rs();return this.indexManager.getCollectionParents(e,r).next(o=>E.forEach(o,a=>{const c=function(l,u){return new yi(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s).next(l=>{l.forEach((u,f)=>{i=i.insert(u,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,c)=>{const l=c.getKey();r.get(l)===null&&(r=r.insert(l,Ie.newInvalidDocument(l)))});let o=rs();return r.forEach((a,c)=>{const l=i.get(a);l!==void 0&&fs(l.mutation,c,dt.empty(),ye.now()),Ua(n,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):E.resolve(Ie.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return E.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:Et(s.createTime)}),E.resolve()}getNamedQuery(e,n){return E.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:X0(s.bundledQuery),readTime:Et(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.overlays=new Ee(R.comparator),this.es=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const s=tn();return E.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),E.resolve()}getOverlaysForCollection(e,n,s){const r=tn(),i=n.length+1,o=new R(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return E.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ee((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>s){let u=i.get(l.largestBatchId);u===null&&(u=tn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=tn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return E.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Q0(n,s));let i=this.es.get(n);i===void 0&&(i=W(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.ns=new ve(Te.ss),this.rs=new ve(Te.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new Te(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new Te(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new R(new ce([])),s=new Te(n,e),r=new Te(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new R(new ce([])),s=new Te(n,e),r=new Te(n,e+1);let i=W();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Te(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Te{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return R.comparator(e.key,n.key)||J(e._s,n._s)}static os(e,n){return J(e._s,n._s)||R.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new ve(Te.ss)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new G0(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Te(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Te(n,0),r=new Te(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ve(J);return n.forEach(r=>{const i=new Te(r,0),o=new Te(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),E.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;R.isDocumentKey(i)||(i=i.child(""));const o=new Te(new R(i),0);let a=new ve(J);return this.gs.forEachWhile(c=>{const l=c.key.path;return!!s.isPrefixOf(l)&&(l.length===r&&(a=a.add(c._s)),!0)},o),E.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ie(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return E.forEach(n.mutations,r=>{const i=new Te(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new Te(n,0),r=this.gs.firstAfterOrEqual(s);return E.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.Es=e,this.docs=new Ee(R.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return E.resolve(s?s.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(e,n){let s=It();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ie.newInvalidDocument(r))}),E.resolve(s)}getAllFromCollection(e,n,s){let r=It();const i=new R(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Wv(zv(c),s)<=0||(r=r.insert(c.key,c.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(e,n,s,r){U()}As(e,n){return E.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new a1(this)}getSize(e){return E.resolve(this.size)}}class a1 extends e1{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),E.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.persistence=e,this.Rs=new Qn(n=>Pa(n),Fa),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ha,this.targetCount=0,this.vs=Vn.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),E.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Vn(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Dn(n),E.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),E.waitFor(i).next(()=>r)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return E.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),E.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),E.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return E.resolve(s)}containsKey(e,n){return E.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Ra(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new c1(this),this.indexManager=new J0,this.remoteDocumentCache=function(s){return new o1(s)}(s=>this.referenceDelegate.xs(s)),this.It=new Y0(n),this.Ns=new s1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new i1(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){L("MemoryPersistence","Starting transaction:",e);const r=new u1(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Os(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ms(e,n){return E.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class u1 extends Qv{constructor(e){super(),this.currentSequenceNumber=e}}class qa{constructor(e){this.persistence=e,this.Fs=new Ha,this.$s=null}static Bs(e){return new qa(e)}get Ls(){if(this.$s)return this.$s;throw U()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),E.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),E.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Ls,s=>{const r=R.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,q.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return E.or([()=>E.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=W(),r=W();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ka(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Oi(e,n,r,s)).next(i=>i||this.Mi(e,n))}ki(e,n){if(yl(n))return E.resolve(null);let s=Ct(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Po(n,null,"F"),s=Ct(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=W(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const l=this.Fi(n,a);return this.$i(n,l,o,c.readTime)?this.ki(e,Po(n,null,"F")):this.Bi(e,l,n,c)}))})))}Oi(e,n,s,r){return yl(n)||r.isEqual(q.min())?this.Mi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Mi(e,n):(cl()<=X.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fo(n)),this.Bi(e,o,n,Kv(r,-1)))})}Fi(e,n){let s=new ve(af(e));return n.forEach((r,i)=>{Ua(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,n){return cl()<=X.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.Ni.getDocumentsMatchingQuery(e,n,Vt.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new Ee(J),this.qi=new Qn(i=>Pa(i),Fa),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n1(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function d1(t,e,n,s){return new f1(t,e,n,s)}async function Df(t,e){const n=$(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=W();for(const l of r){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(s,c).next(l=>({ji:l,removedBatchIds:o,addedBatchIds:a}))})})}function p1(t,e){const n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,f=u.keys();let p=E.resolve();return f.forEach(m=>{p=p.next(()=>l.getEntry(a,m)).next(S=>{const T=c.docVersions.get(m);ie(T!==null),S.version.compareTo(T)<0&&(u.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),l.addEntry(S)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=W();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function xf(t){const e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function g1(t,e){const n=$(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((u,f)=>{const p=r.get(f);if(!p)return;a.push(n.Cs.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Cs.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(f)?m=m.withResumeToken(Fe.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,s)),r=r.insert(f,m),function(S,T,M){return S.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(p,m,u)&&a.push(n.Cs.updateTargetData(i,m))});let c=It(),l=W();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(m1(i,o,e.documentUpdates).next(u=>{c=u.Wi,l=u.zi})),!s.isEqual(q.min())){const u=n.Cs.getLastRemoteSnapshotVersion(i).next(f=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.Ui=r,i))}function m1(t,e,n){let s=W(),r=W();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=It();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Wi:o,zi:r}})}function y1(t,e){const n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function v1(t,e){const n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,E.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new an(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function $o(t,e,n){const s=$(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ks(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function Sl(t,e,n){const s=$(t);let r=q.min(),i=W();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=$(a),f=u.qi.get(l);return f!==void 0?E.resolve(u.Ui.get(f)):u.Cs.getTargetData(c,l)}(s,o,Ct(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:q.min(),n?i:W())).next(a=>(w1(s,p0(e),a),{documents:a,Hi:i})))}function w1(t,e,n){let s=t.Ki.get(e)||q.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class Al{constructor(){this.activeTargetIds=Ef()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class E1{constructor(){this.Lr=new Al,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Al,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,s,r,i){const o=this.ho(e,n);L("RestConnection","Sending: ",o,s);const a={};return this.lo(a,r,i),this.fo(e,o,a,s).then(c=>(L("RestConnection","Received: ",c),c),c=>{throw ko("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",s),c})}_o(e,n,s,r,i,o){return this.ao(e,n,s,r,i)}lo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ho(e,n){const s=T1[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,s,r){return new Promise((i,o)=>{const a=new Ov;a.setWithCredentials(!0),a.listenOnce(kv.COMPLETE,()=>{var l;try{switch(a.getLastErrorCode()){case Yi.NO_ERROR:const u=a.getResponseJson();L("Connection","XHR received:",JSON.stringify(u)),i(u);break;case Yi.TIMEOUT:L("Connection",'RPC "'+e+'" timed out'),o(new O(b.DEADLINE_EXCEEDED,"Request time out"));break;case Yi.HTTP_ERROR:const f=a.getStatus();if(L("Connection",'RPC "'+e+'" failed with status:',f,"response text:",a.getResponseText()),f>0){let p=a.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=(l=p)===null||l===void 0?void 0:l.error;if(m&&m.status&&m.message){const S=function(T){const M=T.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(M)>=0?M:b.UNKNOWN}(m.status);o(new O(S,m.message))}else o(new O(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(b.UNAVAILABLE,"Connection failed."));break;default:U()}}finally{L("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);a.send(n,"POST",c,s,15)})}wo(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Lv(),o=Nv(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Rv({})),this.lo(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const c=r.join("");L("Connection","Creating WebChannel: "+c,a);const l=i.createWebChannel(c,a);let u=!1,f=!1;const p=new _1({Hr:S=>{f?L("Connection","Not sending because WebChannel is closed:",S):(u||(L("Connection","Opening WebChannel transport."),l.open(),u=!0),L("Connection","WebChannel sending:",S),l.send(S))},Jr:()=>l.close()}),m=(S,T,M)=>{S.listen(T,j=>{try{M(j)}catch(Z){setTimeout(()=>{throw Z},0)}})};return m(l,ar.EventType.OPEN,()=>{f||L("Connection","WebChannel transport opened.")}),m(l,ar.EventType.CLOSE,()=>{f||(f=!0,L("Connection","WebChannel transport closed"),p.io())}),m(l,ar.EventType.ERROR,S=>{f||(f=!0,ko("Connection","WebChannel transport errored:",S),p.io(new O(b.UNAVAILABLE,"The operation could not be completed")))}),m(l,ar.EventType.MESSAGE,S=>{var T;if(!f){const M=S.data[0];ie(!!M);const j=M,Z=j.error||((T=j[0])===null||T===void 0?void 0:T.error);if(Z){L("Connection","WebChannel received error:",Z);const F=Z.status;let ee=function(At){const Ze=ge[At];if(Ze!==void 0)return mf(Ze)}(F),de=Z.message;ee===void 0&&(ee=b.INTERNAL,de="Unknown error status: "+F+" with message "+Z.message),f=!0,p.io(new O(ee,de)),l.close()}else L("Connection","WebChannel received:",M),p.ro(M)}}),m(o,Mv.STAT_EVENT,S=>{S.stat===ol.PROXY?L("Connection","Detected buffering proxy"):S.stat===ol.NOPROXY&&L("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function Ji(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t){return new M0(t,!0)}class Lf{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-s);r>0&&L("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,s,r,i,o,a,c){this.Hs=e,this.vo=s,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Lf(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new O(b.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I1 extends Nf{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=P0(this.It,e),s=function(r){if(!("targetChange"in r))return q.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?q.min():i.readTime?Et(i.readTime):q.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=Bo(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=Oo(a)?{documents:U0(r,a)}:{query:B0(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=_f(r,i.resumeToken):i.snapshotVersion.compareTo(q.min())>0&&(o.readTime=Ur(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=j0(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=Bo(this.It),n.removeTarget=e,this.Bo(n)}}class S1 extends Nf{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=V0(e.writeResults,e.commitTime),s=Et(e.commitTime);return this.listener.Zo(s,n)}return ie(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Bo(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>F0(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new O(b.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.ao(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new O(b.UNKNOWN,r.toString())})}_o(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new O(b.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class D1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(_t(n),this.ou=!1):L("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{dn(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=$(a);c._u.add(4),await Gs(c),c.gu.set("Unknown"),c._u.delete(4),await _i(c)}(this))})}),this.gu=new D1(s,r)}}async function _i(t){if(dn(t))for(const e of t.wu)await e(!0)}async function Gs(t){for(const e of t.wu)await e(!1)}function kf(t,e){const n=$(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Ga(n)?Wa(n):Yn(n).ko()&&za(n,e))}function Mf(t,e){const n=$(t),s=Yn(n);n.du.delete(e),s.ko()&&Rf(n,e),n.du.size===0&&(s.ko()?s.Fo():dn(n)&&n.gu.set("Unknown"))}function za(t,e){t.yu.Mt(e.targetId),Yn(t).zo(e)}function Rf(t,e){t.yu.Mt(e),Yn(t).Ho(e)}function Wa(t){t.yu=new L0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),Yn(t).start(),t.gu.uu()}function Ga(t){return dn(t)&&!Yn(t).No()&&t.du.size>0}function dn(t){return $(t)._u.size===0}function Of(t){t.yu=void 0}async function L1(t){t.du.forEach((e,n)=>{za(t,e)})}async function N1(t,e){Of(t),Ga(t)?(t.gu.hu(e),Wa(t)):t.gu.set("Unknown")}async function k1(t,e,n){if(t.gu.set("Online"),e instanceof Tf&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Br(t,s)}else if(e instanceof yr?t.yu.Gt(e):e instanceof bf?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(q.min()))try{const s=await xf(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.du.get(c);l&&r.du.set(c,l.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const c=r.du.get(a);if(!c)return;r.du.set(a,c.withResumeToken(Fe.EMPTY_BYTE_STRING,c.snapshotVersion)),Rf(r,a);const l=new an(c.target,a,1,c.sequenceNumber);za(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){L("RemoteStore","Failed to raise snapshot:",s),await Br(t,s)}}async function Br(t,e,n){if(!Ks(e))throw e;t._u.add(1),await Gs(t),t.gu.set("Offline"),n||(n=()=>xf(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await _i(t)})}function Pf(t,e){return e().catch(n=>Br(t,n,e))}async function Ci(t){const e=$(t),n=Bt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;M1(e);)try{const r=await y1(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,R1(e,r)}catch(r){await Br(e,r)}Ff(e)&&Vf(e)}function M1(t){return dn(t)&&t.fu.length<10}function R1(t,e){t.fu.push(e);const n=Bt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Ff(t){return dn(t)&&!Bt(t).No()&&t.fu.length>0}function Vf(t){Bt(t).start()}async function O1(t){Bt(t).eu()}async function P1(t){const e=Bt(t);for(const n of t.fu)e.Xo(n.mutations)}async function F1(t,e,n){const s=t.fu.shift(),r=ja.from(s,e,n);await Pf(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ci(t)}async function V1(t,e){e&&Bt(t).Yo&&await async function(n,s){if(r=s.code,I0(r)&&r!==b.ABORTED){const i=n.fu.shift();Bt(n).Mo(),await Pf(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ci(n)}var r}(t,e),Ff(t)&&Vf(t)}async function xl(t,e){const n=$(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const s=dn(n);n._u.add(3),await Gs(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await _i(n)}async function U1(t,e){const n=$(t);e?(n._u.delete(2),await _i(n)):e||(n._u.add(2),await Gs(n),n.gu.set("Unknown"))}function Yn(t){return t.pu||(t.pu=function(e,n,s){const r=$(e);return r.su(),new I1(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:L1.bind(null,t),Zr:N1.bind(null,t),Wo:k1.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Ga(t)?Wa(t):t.gu.set("Unknown")):(await t.pu.stop(),Of(t))})),t.pu}function Bt(t){return t.Iu||(t.Iu=function(e,n,s){const r=$(e);return r.su(),new S1(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:O1.bind(null,t),Zr:V1.bind(null,t),tu:P1.bind(null,t),Zo:F1.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Ci(t)):(await t.Iu.stop(),t.fu.length>0&&(L("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Qa(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ya(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Ks(t))return new O(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e?(n,s)=>e(n,s)||R.comparator(n.key,s.key):(n,s)=>R.comparator(n.key,s.key),this.keyedMap=rs(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new An(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new An;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.Tu=new Ee(R.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):U():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class Un{constructor(e,n,s,r,i,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Un(e,n,An.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Au=void 0,this.listeners=[]}}class $1{constructor(){this.queries=new Qn(e=>of(e),vi),this.onlineState="Unknown",this.Ru=new Set}}async function j1(t,e){const n=$(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new B1),r)try{i.Au=await n.onListen(s)}catch(o){const a=Ya(o,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Xa(n)}async function H1(t,e){const n=$(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function q1(t,e){const n=$(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&Xa(n)}function K1(t,e,n){const s=$(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Xa(t){t.Ru.forEach(e=>{e.next()})}class z1{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Un(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Un.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.key=e}}class Bf{constructor(e){this.key=e}}class W1{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=W(),this.mutatedKeys=W(),this.Gu=af(e),this.Qu=new An(this.Gu)}get ju(){return this.Uu}Wu(e,n){const s=n?n.zu:new Ll,r=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,f)=>{const p=r.get(u),m=Ua(this.query,f)?f:null,S=!!p&&this.mutatedKeys.has(p.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let M=!1;p&&m?p.data.isEqual(m.data)?S!==T&&(s.track({type:3,doc:m}),M=!0):this.Hu(p,m)||(s.track({type:2,doc:m}),M=!0,(c&&this.Gu(m,c)>0||l&&this.Gu(m,l)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),M=!0):p&&!m&&(s.track({type:1,doc:p}),M=!0,(c||l)&&(a=!0)),M&&(m?(o=o.add(m),i=T?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Qu:o,zu:s,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((l,u)=>function(f,p){const m=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return U()}};return m(f)-m(p)}(l.type,u.type)||this.Gu(l.doc,u.doc)),this.Ju(s);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,c=a!==this.qu;return this.qu=a,i.length!==0||c?{snapshot:new Un(this.query,e.Qu,r,i,e.mutatedKeys,a===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ll,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=W(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const n=[];return e.forEach(s=>{this.Ku.has(s)||n.push(new Bf(s))}),this.Ku.forEach(s=>{e.has(s)||n.push(new Uf(s))}),n}tc(e){this.Uu=e.Hi,this.Ku=W();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Un.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class G1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Q1{constructor(e){this.key=e,this.nc=!1}}class Y1{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Qn(a=>of(a),vi),this.rc=new Map,this.oc=new Set,this.uc=new Ee(R.comparator),this.cc=new Map,this.ac=new Ha,this.hc={},this.lc=new Map,this.fc=Vn.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function X1(t,e){const n=aw(t);let s,r;const i=n.ic.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.ec();else{const o=await v1(n.localStore,Ct(e));n.isPrimaryClient&&kf(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await J1(n,e,s,a==="current",o.resumeToken)}return r}async function J1(t,e,n,s,r){t._c=(f,p,m)=>async function(S,T,M,j){let Z=T.view.Wu(M);Z.$i&&(Z=await Sl(S.localStore,T.query,!1).then(({documents:de})=>T.view.Wu(de,Z)));const F=j&&j.targetChanges.get(T.targetId),ee=T.view.applyChanges(Z,S.isPrimaryClient,F);return kl(S,T.targetId,ee.Xu),ee.snapshot}(t,f,p,m);const i=await Sl(t.localStore,e,!0),o=new W1(e,i.Hi),a=o.Wu(i.documents),c=Ws.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),l=o.applyChanges(a,t.isPrimaryClient,c);kl(t,n,l.Xu);const u=new G1(e,n,o);return t.ic.set(e,u),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),l.snapshot}async function Z1(t,e){const n=$(t),s=n.ic.get(e),r=n.rc.get(s.targetId);if(r.length>1)return n.rc.set(s.targetId,r.filter(i=>!vi(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await $o(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Mf(n.remoteStore,s.targetId),jo(n,s.targetId)}).catch(qs)):(jo(n,s.targetId),await $o(n.localStore,s.targetId,!0))}async function ew(t,e,n){const s=cw(t);try{const r=await function(i,o){const a=$(i),c=ye.now(),l=o.reduce((p,m)=>p.add(m.key),W());let u,f;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=It(),S=W();return a.Gi.getEntries(p,l).next(T=>{m=T,m.forEach((M,j)=>{j.isValidDocument()||(S=S.add(M))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(T=>{u=T;const M=[];for(const j of o){const Z=T0(j,u.get(j.key).overlayedDocument);Z!=null&&M.push(new fn(j.key,Z,sf(Z.value.mapValue),pt.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,M,o)}).next(T=>{f=T;const M=T.applyToLocalDocumentSet(u,S);return a.documentOverlayCache.saveOverlays(p,T.batchId,M)})}).then(()=>({batchId:f.batchId,changes:vf(u)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let c=i.hc[i.currentUser.toKey()];c||(c=new Ee(J)),c=c.insert(o,a),i.hc[i.currentUser.toKey()]=c}(s,r.batchId,n),await Qs(s,r.changes),await Ci(s.remoteStore)}catch(r){const i=Ya(r,"Failed to persist write");n.reject(i)}}async function $f(t,e){const n=$(t);try{const s=await g1(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.cc.get(i);o&&(ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?ie(o.nc):r.removedDocuments.size>0&&(ie(o.nc),o.nc=!1))}),await Qs(n,s,e)}catch(s){await qs(s)}}function Nl(t,e,n){const s=$(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=$(i);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const f of u.listeners)f.bu(o)&&(c=!0)}),c&&Xa(a)}(s.eventManager,e),r.length&&s.sc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tw(t,e,n){const s=$(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.cc.get(e),i=r&&r.key;if(i){let o=new Ee(R.comparator);o=o.insert(i,Ie.newNoDocument(i,q.min()));const a=W().add(i),c=new bi(q.min(),new Map,new ve(J),o,a);await $f(s,c),s.uc=s.uc.remove(i),s.cc.delete(e),Ja(s)}else await $o(s.localStore,e,!1).then(()=>jo(s,e,n)).catch(qs)}async function nw(t,e){const n=$(t),s=e.batch.batchId;try{const r=await p1(n.localStore,e);Hf(n,s,null),jf(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Qs(n,r)}catch(r){await qs(r)}}async function sw(t,e,n){const s=$(t);try{const r=await function(i,o){const a=$(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(ie(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(s.localStore,e);Hf(s,e,n),jf(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Qs(s,r)}catch(r){await qs(r)}}function jf(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function Hf(t,e,n){const s=$(t);let r=s.hc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.hc[s.currentUser.toKey()]=r}}function jo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.rc.get(e))t.ic.delete(s),n&&t.sc.wc(s,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(s=>{t.ac.containsKey(s)||qf(t,s)})}function qf(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(Mf(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),Ja(t))}function kl(t,e,n){for(const s of n)s instanceof Uf?(t.ac.addReference(s.key,e),rw(t,s)):s instanceof Bf?(L("SyncEngine","Document no longer in limbo: "+s.key),t.ac.removeReference(s.key,e),t.ac.containsKey(s.key)||qf(t,s.key)):U()}function rw(t,e){const n=e.key,s=n.path.canonicalString();t.uc.get(n)||t.oc.has(s)||(L("SyncEngine","New document in limbo: "+n),t.oc.add(s),Ja(t))}function Ja(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new R(ce.fromString(e)),s=t.fc.next();t.cc.set(s,new Q1(n)),t.uc=t.uc.insert(n,s),kf(t.remoteStore,new an(Ct(Va(n.path)),s,2,Ra.at))}}async function Qs(t,e,n){const s=$(t),r=[],i=[],o=[];s.ic.isEmpty()||(s.ic.forEach((a,c)=>{o.push(s._c(c,e,n).then(l=>{if((l||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,l!=null&&l.fromCache?"not-current":"current"),l){r.push(l);const u=Ka.Ci(c.targetId,l);i.push(u)}}))}),await Promise.all(o),s.sc.Wo(r),await async function(a,c){const l=$(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>E.forEach(c,f=>E.forEach(f.Si,p=>l.persistence.referenceDelegate.addReference(u,f.targetId,p)).next(()=>E.forEach(f.Di,p=>l.persistence.referenceDelegate.removeReference(u,f.targetId,p)))))}catch(u){if(!Ks(u))throw u;L("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const f=u.targetId;if(!u.fromCache){const p=l.Ui.get(f),m=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(m);l.Ui=l.Ui.insert(f,S)}}}(s.localStore,i))}async function iw(t,e){const n=$(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const s=await Df(n.localStore,e);n.currentUser=e,function(r,i){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new O(b.CANCELLED,i))})}),r.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qs(n,s.ji)}}function ow(t,e){const n=$(t),s=n.cc.get(e);if(s&&s.nc)return W().add(s.key);{let r=W();const i=n.rc.get(e);if(!i)return r;for(const o of i){const a=n.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function aw(t){const e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$f.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ow.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tw.bind(null,e),e.sc.Wo=q1.bind(null,e.eventManager),e.sc.wc=K1.bind(null,e.eventManager),e}function cw(t){const e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sw.bind(null,e),e}class lw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Ti(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return d1(this.persistence,new h1,e.initialUser,this.It)}yc(e){return new l1(qa.Bs,this.It)}gc(e){return new E1}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Nl(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iw.bind(null,this.syncEngine),await U1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $1}createDatastore(e){const n=Ti(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new C1(r));var r;return function(i,o,a,c){return new A1(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Nl(this.syncEngine,a,0),o=Dl.C()?new Dl:new b1,new x1(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,c,l){const u=new Y1(s,r,i,o,a,c);return l&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=$(e);L("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Gs(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e,n){if(!n)throw new O(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hw(t,e,n,s){if(e===!0&&s===!0)throw new O(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ml(t){if(!R.isDocumentKey(t))throw new O(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rl(t){if(R.isDocumentKey(t))throw new O(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Za(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":U()}function Dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Za(t);throw new O(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map;class Pl{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new O(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pl(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Pv;switch(n.type){case"gapi":const s=n.client;return new Bv(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new O(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Ol.get(e);n&&(L("ComponentProvider","Removing Datastore"),Ol.delete(e),n.terminate())}(this),Promise.resolve()}}function fw(t,e,n,s={}){var r;const i=(t=Dn(t,Ii))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&ko("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=xe.MOCK_USER;else{o=Em(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new O(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new xe(c)}t._authCredentials=new Fv(new Jh(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ot(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}}class Si{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Ot extends Si{constructor(e,n,s){super(e,n,Va(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new R(e))}withConverter(e){return new Ot(this.firestore,e,this._path)}}function zf(t,e,...n){if(t=Mn(t),Kf("collection","path",e),t instanceof Ii){const s=ce.fromString(e,...n);return Rl(s),new Ot(t,null,s)}{if(!(t instanceof Je||t instanceof Ot))throw new O(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Rl(s),new Ot(t.firestore,null,s)}}function Wf(t,e,...n){if(t=Mn(t),arguments.length===1&&(e=Zh.R()),Kf("doc","path",e),t instanceof Ii){const s=ce.fromString(e,...n);return Ml(s),new Je(t,null,new R(s))}{if(!(t instanceof Je||t instanceof Ot))throw new O(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Ml(s),new Je(t.firestore,t instanceof Ot?t.converter:null,new R(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=xe.UNAUTHENTICATED,this.clientId=Zh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ya(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function gw(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Df(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function mw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yw(t);L("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>xl(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xl(e.remoteStore,i)),t.onlineComponents=e}async function yw(t){return t.offlineComponents||(L("FirestoreClient","Using default OfflineComponentProvider"),await gw(t,new lw)),t.offlineComponents}async function Gf(t){return t.onlineComponents||(L("FirestoreClient","Using default OnlineComponentProvider"),await mw(t,new uw)),t.onlineComponents}function vw(t){return Gf(t).then(e=>e.syncEngine)}async function Fl(t){const e=await Gf(t),n=e.eventManager;return n.onListen=X1.bind(null,e.syncEngine),n.onUnlisten=Z1.bind(null,e.syncEngine),n}class ww{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Lf(this,"async_queue_retry"),this.Wc=()=>{const n=Ji();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Ji();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Ji();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new on;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Ks(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{this.Kc=s,this.Gc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw _t("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=Qa.createAndSchedule(this,e,n,s,i=>this.Yc(i));return this.qc.push(r),r}zc(){this.Kc&&U()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function Vl(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Rs extends Ii{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new ww,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yf(this),this._firestoreClient.terminate()}}function Ew(t,e){const n=typeof t=="object"?t:Ty(),s=typeof t=="string"?t:e||"(default)",r=vy(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=ym("firestore");i&&fw(r,...i)}return r}function Qf(t){return t._firestoreClient||Yf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Yf(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new Xv(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new pw(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Fe.fromBase64String(e))}catch(n){throw new O(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bn(Fe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ne(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=/^__.*__$/;class Tw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new zs(e,this.data,n,this.fieldTransforms)}}function Jf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw U()}}class nc{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new nc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.ua(e),r}ca(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $r(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(Jf(this.sa)&&bw.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class _w{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||Ti(e)}da(e,n,s,r=!1){return new nc({sa:e,methodName:n,fa:s,path:Ne.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Cw(t){const e=t._freezeSettings(),n=Ti(t._databaseId);return new _w(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iw(t,e,n,s,r,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,r);nd("Data must be an object, but it was:",o,s);const a=ed(s,o);let c,l;if(i.merge)c=new dt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=Sw(e,f,n);if(!o.contains(p))throw new O(b.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Dw(u,p)||u.push(p)}c=new dt(u),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new Tw(new Ye(a),c,l)}function Zf(t,e){if(td(t=Mn(t)))return nd("Unsupported field value:",e,t),ed(t,e);if(t instanceof Xf)return function(n,s){if(!Jf(s.sa))throw s.ha(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=Zf(o,s.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Mn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return m0(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ye.fromDate(n);return{timestampValue:Ur(s.It,r)}}if(n instanceof ye){const r=new ye(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ur(s.It,r)}}if(n instanceof tc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Bn)return{bytesValue:_f(s.It,n._byteString)};if(n instanceof Je){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$a(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.ha(`Unsupported field value: ${Za(n)}`)}(t,e)}function ed(t,e){const n={};return ef(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gn(t,(s,r)=>{const i=Zf(r,e.ra(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function td(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof tc||t instanceof Bn||t instanceof Je||t instanceof Xf)}function nd(t,e,n){if(!td(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Za(n);throw s==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+s)}}function Sw(t,e,n){if((e=Mn(e))instanceof ec)return e._internalPath;if(typeof e=="string")return sd(t,e);throw $r("Field path arguments must be of type string or ",t,!1,void 0,n)}const Aw=new RegExp("[~\\*/\\[\\]]");function sd(t,e,n){if(e.search(Aw)>=0)throw $r(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ec(...e.split("."))._internalPath}catch{throw $r(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $r(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new O(b.INVALID_ARGUMENT,a+t+c)}function Dw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(id("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xw extends rd{data(){return super.data()}}function id(t,e){return typeof e=="string"?sd(t,e):e instanceof ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{convertValue(e,n="none"){switch(un(e)){case 0:return null;case 1:return e.booleanValue;case 2:return me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw U()}}convertObject(e,n){const s={};return Gn(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new tc(me(e.latitude),me(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=nf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ds(e));default:return null}}convertTimestamp(e){const n=Ut(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ce.fromString(e);ie(Af(s));const r=new xs(s.get(1),s.get(3)),i=new R(s.popFirst(5));return r.isEqual(n)||_t(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class od extends rd{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(id("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class vr extends od{data(e={}){return super.data(e)}}class Mw{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new is(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new vr(this._firestore,this._userDataWriter,s.key,s,new is(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new vr(s._firestore,s._userDataWriter,o.doc.key,o.doc,new is(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new vr(s._firestore,s._userDataWriter,o.doc.key,o.doc,new is(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,l=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),l=i.indexOf(o.doc.key)),{type:Rw(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Rw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return U()}}class ad extends Nw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function Ow(t){return cd(Dn(t.firestore,Rs),[new Ba(t._key,pt.none())])}function Pw(t,e){const n=Dn(t.firestore,Rs),s=Wf(t),r=kw(t.converter,e);return cd(n,[Iw(Cw(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,pt.exists(!1))]).then(()=>s)}function Fw(t,...e){var n,s,r;t=Mn(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Vl(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Vl(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(s=f.error)===null||s===void 0?void 0:s.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,l,u;if(t instanceof Je)l=Dn(t.firestore,Rs),u=Va(t._key.path),c={next:f=>{e[o]&&e[o](Vw(l,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Dn(t,Si);l=Dn(f.firestore,Rs),u=f._query;const p=new ad(l);c={next:m=>{e[o]&&e[o](new Mw(l,p,f,m))},error:e[o+1],complete:e[o+2]},Lw(t._query)}return function(f,p,m,S){const T=new dw(S),M=new z1(p,T,m);return f.asyncQueue.enqueueAndForget(async()=>j1(await Fl(f),M)),()=>{T.bc(),f.asyncQueue.enqueueAndForget(async()=>H1(await Fl(f),M))}}(Qf(l),u,a,c)}function cd(t,e){return function(n,s){const r=new on;return n.asyncQueue.enqueueAndForget(async()=>ew(await vw(n),s,r)),r.promise}(Qf(t),e)}function Vw(t,e,n){const s=n.docs.get(e._key),r=new ad(t);return new od(t,r,e._key,s,new is(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Wn=n})(by),Sr(new Es("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Rs(new Vv(n.getProvider("auth-internal")),new jv(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new O(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(a.options.projectId,c)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),In(al,"3.7.3",t),In(al,"3.7.3","esm2017")})();const Uw={apiKey:"AIzaSyDvG0c2EVfSzzBM-nUgAVwrLAytjq-ipK0",authDomain:"video-list-91d77.firebaseapp.com",projectId:"video-list-91d77",storageBucket:"video-list-91d77.appspot.com",messagingSenderId:"726583994129",appId:"1:726583994129:web:75d5235ddd9523b910ceb0"};Wu(Uw);const sc=Ew(),Bw=t=>Pw(zf(sc,"videos"),t),$w=t=>Fw(zf(sc,"videos"),t),jw=t=>Ow(Wf(sc,"videos",t));function Zi(t,e,n){const s=document.createElement("div");s.classList.add("toast"),s.classList.add(e),s.innerText=t,n.appendChild(s),setTimeout(()=>{s.remove()},3e3)}const Hw={class:"container"},qw={__name:"App",setup(t){const e=_n(null),n=_n([]);$w(o=>{n.value=[],o.forEach(a=>n.value.unshift({video:a.data(),id:a.id}))});function s(o){o.forEach(a=>Bw(a).then(()=>Zi("Se subio el video","succes",e.value)))}function r(o){jw(o).then(()=>Zi("Se elimino el video","succes",e.value))}function i(o){Zi(o,"error",e.value)}return(o,a)=>(kt(),Nn("div",Hw,[ze(Bg,{onSaveVideos:s,onError:i}),ze(om,{videoList:n.value,onDelete:r},null,8,["videoList"]),ne("div",{ref_key:"toast",ref:e,id:"toasts"},null,512)]))}};Og(qw).mount("#app");
